<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Introduction to artificial neural networks in Python: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="../assets/images/software-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="../assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Introduction to artificial neural networks in Python
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Introduction to artificial neural networks in Python
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">FIXME</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to artificial neural networks in Python
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-xrays.html">1. Introduction</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-visualisation.html">2. Visualisation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-data_prep.html">3. Data preparation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-create_net.html">4. Neural networks</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-scripts.html">5. Writing MATLAB Scripts</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-func.html">6. Creating Functions</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-loops.html">7. Repeating With Loops</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-cond.html">8. Making Choices</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">FIXME</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-xrays"><p>Content from <a href="01-xrays.html">Introduction</a></p>
<hr>
<p>Last updated on 2023-09-07 |

        <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/edit/main/episodes/01-xrays.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What kinds of diseases can be observed in chest X-rays?”</li>
<li>“What is pleural effusion?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Gain awareness of the NIH ChestX-ray dataset.”</li>
<li>“Load a subset of labelled chest X-rays.”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Algorithms can be used to detect disease in chest X-rays.”</li>
</ul>
</div>
</div>
</div>
<section><h2 class="section-heading" id="chest-x-rays">Chest X-rays<a class="anchor" aria-label="anchor" href="#chest-x-rays"></a>
</h2>
<hr class="half-width">
<p>Chest X-rays are frequently used in healthcare to view the heart,
lungs, and bones of patients. On an X-ray, broadly speaking, bones
appear white, soft tissue appears grey, and air appears black. The
images can show details such as:</p>
<ul>
<li>Lung conditions, for example pneumonia, emphysema, or air in the
space around the lung.</li>
<li>Heart conditions, such as heart failure or heart valve
problems.</li>
<li>Bone conditions, such as rib or spine fractures</li>
<li>Medical devices, such as pacemaker, defibrillators and catheters.
X-rays are often taken to assess whether these devices are positioned
correctly.</li>
</ul>
<p>In recent years, organisations like the <a href="https://www.nih.gov/news-events/news-releases/nih-clinical-center-provides-one-largest-publicly-available-chest-x-ray-datasets-scientific-community" class="external-link">National
Institutes of Health</a> have released large collections of X-rays,
labelled with common diseases. The goal is to stimulate the community to
develop algorithms that might assist radiologists in making diagnoses,
and to potentially discover other findings that may have been
overlooked.</p>
<p>The following figure is from a study by <a href="https://openaccess.thecvf.com/content_cvpr_2017/papers/Wang_ChestX-ray8_Hospital-Scale_Chest_CVPR_2017_paper.pdf" class="external-link">Xiaosong
Wang et al</a>. It illustrates eight common diseases that the authors
noted could be be detected and even spatially-located in front chest
x-rays with the use of modern machine learning algorithms.</p>
<figure><img src="../fig/wang_et_al.png" alt="Chest X-ray diseases" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="pleural-effusion">Pleural effusion<a class="anchor" aria-label="anchor" href="#pleural-effusion"></a>
</h2>
<hr class="half-width">
<p>Thin membranes called “pleura” line the lungs and facilitate
breathing. Normally there is a small amount of fluid present in the
pleura, but certain conditions can cause excess build-up of fluid. This
build-up is known as pleural effusion, sometimes referred to as “water
on the lungs”.</p>
<p>Causes of pleural effusion vary widely, ranging from mild viral
infections to serious conditions such as congestive heart failure and
cancer. In an upright patient, fluid gathers in the lowest part of the
chest, and this build up is visible to an expert.</p>
<p>For the remainder of this lesson, we will develop an algorithm to
detect pleural effusion in chest X-rays. Specifically, using a set of
chest X-rays labelled as either “normal” or “pleural effusion”, we will
train a neural network to classify unseen chest X-rays into one of these
classes.</p>
</section><section><h2 class="section-heading" id="loading-the-dataset">Loading the dataset<a class="anchor" aria-label="anchor" href="#loading-the-dataset"></a>
</h2>
<hr class="half-width">
<p>The data that we are going to use for this project consists of 350
“normal” chest X-rays and 350 X-rays that are labelled as showing
evidence pleural effusion. These X-rays are a subset of the public NIH
ChestX-ray dataset.</p>
<blockquote>
<p>Xiaosong Wang, Yifan Peng, Le Lu, Zhiyong Lu, Mohammadhadi Bagheri,
Ronald Summers, ChestX-ray8: Hospital-scale Chest X-ray Database and
Benchmarks on Weakly-Supervised Classification and Localization of
Common Thorax Diseases, IEEE CVPR, pp. 3462-3471, 2017</p>
</blockquote>
<p>Let’s begin by loading the dataset.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># The glob module finds all the pathnames matching a specified pattern</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="im">from</span> glob <span class="im">import</span> glob</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co"># If your dataset is compressed, unzip with:</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># !unzip chest_xrays.zip</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co"># Define folders containing images</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>data_path <span class="op">=</span> os.path.join(<span class="st">"chest_xrays"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>effusion_path <span class="op">=</span> os.path.join(data_path, <span class="st">"effusion"</span>, <span class="st">"*.png"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>normal_path <span class="op">=</span> os.path.join(data_path, <span class="st">"normal"</span>, <span class="st">"*.png"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co"># Create list of files</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>effusion_list <span class="op">=</span> glob(effusion_path)</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>normal_list <span class="op">=</span> glob(normal_path)</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of cases with pleural effusion: '</span>, <span class="bu">len</span>(effusion_list)) </span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of normal cases: '</span>, <span class="bu">len</span>(normal_list))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Number of cases with pleural effusion:  350
Number of normal cases:  350</code></pre>
</div>
</section><section><h2 class="section-heading" id="matlab">MATLAB<a class="anchor" aria-label="anchor" href="#matlab"></a>
</h2>
<hr class="half-width"></section><section><h2 class="section-heading" id="introduction-to-the-matlab-gui">Introduction to the MATLAB GUI<a class="anchor" aria-label="anchor" href="#introduction-to-the-matlab-gui"></a>
</h2>
<hr class="half-width">
<p>Before we can start programming, we need to know a little about the
MATLAB interface. Using the default setup, the MATLAB desktop contains
several important sections:</p>
<ul>
<li>In the <strong>Command Window</strong> we can execute commands.
Commands are typed after the prompt <code>&gt;&gt;</code> and are
executed immediately after pressing <kbd>Enter</kbd>.</li>
<li>Alternatively, we can open the <strong>Editor</strong>, write our
code and run it all at once. The advantage of this is that we can save
our code and run it again in the same way at a later stage.</li>
<li>The <strong>Workspace</strong> contains all the variables which we
have loaded into memory.</li>
<li>The <strong>Current Folder</strong> window shows files in the
current directory, and we can change the current folder using this
window.</li>
<li>
<strong>Search Documentation</strong> on the top right of your
screen lets you search for functions. Suggestions for functions that
would do what you want to do will pop up. Clicking on them will open the
documentation. Another way to access the documentation is via the
<code>help</code> command — we will return to this later.</li>
</ul></section><section><h2 class="section-heading" id="working-with-variables">Working with variables<a class="anchor" aria-label="anchor" href="#working-with-variables"></a>
</h2>
<hr class="half-width">
<p>In this lesson we will learn how to manipulate the inflammation
dataset with MATLAB. But before we discuss how to deal with many data
points, we will show how to store a single value on the computer.</p>
<p>We can create a new <a href="reference.html#variable">variable</a> by
assigning a value to it using <code>=</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span> <span class="op">=</span> <span class="fl">55</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">x</span> <span class="op">=</span></span>
<span>    <span class="fl">55</span></span></code></pre>
</div>
<p>Notice that matlab responded by printing an output confirming that
the variable has the desired value, and also that the variable appeared
in the workspace.</p>
<p>A variable is just a name for a piece of data or <em>value</em>.
Variable names must begin with a letter, and are case sensitive. They
can contain also numbers or underscores. Examples of valid variable
names are <code>weight</code>, <code>size3</code>,
<code>patient_name</code> or <code>alive_on_day_3</code>.</p>
<p>The reason we work with variables is so that we can reuse them, or
save them for later use. We can do operations with these variables. For
example, we can do a simple sum:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">y</span> <span class="op">=</span> <span class="fl">10</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span> <span class="op">+</span> <span class="va">y</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">y</span> <span class="op">=</span></span>
<span>    <span class="fl">10</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>    <span class="fl">65</span></span></code></pre>
</div>
<p>Note that the answer was saved in a new variable called
<code>ans</code>. This variable is temporary, and will be overwritten
with any new operation we do. For example, if we now substract y from x
we get:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span> <span class="op">-</span> <span class="va">y</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>    <span class="fl">45</span></span></code></pre>
</div>
<p>The result of the sum is now gone forever. We can of course assign
the result of an operation to a new variable, for example:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">z</span> <span class="op">=</span> <span class="va">x</span> <span class="op">*</span> <span class="va">y</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">z</span> <span class="op">=</span></span>
<span>    <span class="fl">550</span></span></code></pre>
</div>
<p>This created a new variable <code>z</code>. If you look at the
workspace, you can see that the value of z is 550.</p>
<p>We can even use a variable in an operation, and save the value in the
same variable. Fer example:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">y</span> <span class="op">=</span> <span class="va">y</span><span class="op">/</span><span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">y</span> <span class="op">=</span></span>
<span>    <span class="fl">2</span></span></code></pre>
</div>
<p>Where you can see that the expression to the right of the
<code>=</code> sign is evaluated <em>first</em>, and the result is then
assigned to the variable specified to the left of the <code>=</code>
sign.</p>
<p>Of course, we can use multiple variables in a single operation, for
example:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">z</span> <span class="op">=</span> <span class="va">z</span> <span class="op">-</span> <span class="va">y</span><span class="op">^</span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span><span class="op">*</span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">z</span> <span class="op">=</span></span>
<span>    <span class="fl">817</span></span></code></pre>
</div>
<p>where we used the caret symbol <code>^</code> to take the third power
of y.</p>
<div class="section level3">
<h3 id="logical-operations">Logical operations<a class="anchor" aria-label="anchor" href="#logical-operations"></a>
</h3>
<p>In programming, there is another type of opperation that becomes very
important: comparison. We can compare two numbers (or variables) to see
which one is smaller, for example</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mass</span> <span class="op">=</span> <span class="fl">20</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">age</span> <span class="op">=</span> <span class="fl">2.5</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">frac</span> <span class="op">=</span> <span class="va">mass</span><span class="op">/</span><span class="va">age</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">c1</span> <span class="op">=</span> <span class="va">frac</span> <span class="op">&lt;</span> <span class="fl">10</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">c1</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
</div>
<p>Something interesting just happened with the variable c1. If I ask
you wether frac (8) is smaller than 10, you would say “yes”. Matlab
answered with a <code>logical 1</code>. If I ask you wether frac is
greater than 10, you would say “no”. Matlab answers with a
<code>logical 0</code>.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">c2</span> <span class="op">=</span> <span class="va">frac</span> <span class="op">&gt;</span> <span class="fl">10</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">c2</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span></code></pre>
</div>
<p>There are only two options (yes or no, true or false, 0 or 1), and so
it is “cheaper” for the computer to only save space for those two
options.</p>
<p>The “type” of data is not the same as a number. It comes froma
logical comparison, and so matlab identifies it as such.</p>
<p>You can also see that in the workspace these variables have a tick
next to them, instead of the squares we had seen. There is actually
other symbols we can get there, which relate to the types of information
we can save (unfold the info below if you want to know more).</p>
<div id="data-types" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="data-types" class="callout-inner">
<h3 class="callout-title">Data types</h3>
<div class="callout-content">
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>We mentioned above that we can get other symbols in the workspace
which relate to the types of information we can save.</p>
<p>We know we can save numbers, and logical values, but we can also save
letters or strings, for example. Numbers are by default saved as type <a href="https://uk.mathworks.com/help/matlab/ref/double.html" class="external-link"><em>double</em></a>,
which just means they can store very big or very small numbers. Letters
are type <a href="https://uk.mathworks.com/help/matlab/ref/char.html" class="external-link">‘<em>char</em>’</a>,
and words or sentences are <a href="https://uk.mathworks.com/help/matlab/ref/string.html" class="external-link">“<em>strings</em>”</a>.
Logical values (or booleans) are values that mean <a href="https://uk.mathworks.com/help/matlab/ref/true.html" class="external-link">true</a> or <a href="https://uk.mathworks.com/help/matlab/ref/false.html" class="external-link">false</a>,
and are represented with zero or one. They are usually the result of
comparing things.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">weight</span> <span class="op">=</span> <span class="fl">64.5</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">size3</span> <span class="op">=</span> <span class="ss">'L'</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_name</span> <span class="op">=</span> <span class="st">"Jane Doe"</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">alive_on_day_3</span> <span class="op">=</span> <span class="va">true</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">weight</span> <span class="op">=</span></span>
<span>   <span class="fl">64.5000</span></span>
<span><span class="va">size3</span> <span class="op">=</span></span>
<span>    <span class="st">'L'</span></span>
<span><span class="va">patient_name</span> <span class="op">=</span></span>
<span>    <span class="st">"Jane Doe"</span></span>
<span><span class="va">alive_on_day_3</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
</div>
<p>Notice the single tick for character variables, in contrast with the
double quote for strings.</p>
<p>If you look at the woorkspace, you’ll notice that the icon next to
each variable is different, and if you hover over it, it will tell you
the type of variable it is.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>We can also check if two variables (or even operations) are the
same</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">c3</span> <span class="op">=</span> <span class="va">frac</span> <span class="op">==</span> <span class="va">mass</span><span class="op">/</span><span class="va">age</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">c3</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
</div>
<p>And we can combine comparisons. For example, we can check wether frac
is smaller than 10 <strong><em>and</em></strong> the age is greater than
5</p>
<pre><code>&gt;&gt; c4 = frac &lt; 10 &amp;&amp; age &gt; 5
```matlab
```output
c4 =
  logical
   0</code></pre>
<p>In this case, both conditions need to be met for the result to be
“yes” (1).</p>
<p>If we want a “yes” as long as at least one of the conditions are met,
we woudl ask if frac is smaller than 10 <strong><em>or</em></strong> the
age is greater than 5</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">c5</span> <span class="op">=</span> <span class="va">frac</span> <span class="op">&lt;</span> <span class="fl">10</span> <span class="op">||</span> <span class="va">age</span> <span class="op">&gt;</span> <span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">c5</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
</div>
<div id="negating-conditions-and-including-the-limits" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="negating-conditions-and-including-the-limits" class="callout-inner">
<h3 class="callout-title">Negating conditions and including the limits</h3>
<div class="callout-content">
<p>We often asks questions or characterise things in negative. “We did
not start late today.”, “I was not going faster than the speed limit
officer!”, and “I didn’t shoot no deputy” are just some examples.</p>
<p>Naturally, we may want to do so in programming too. In matlab the
negative is represented with <code>~</code>. For example, we can check
if the speed is indeed not faster than the limit with
<code>~(speed &gt; 70)</code>, which matlab reads as “not speed greater
than 70”.</p>
<p>Can you express these questions in matlab code? - Is 1 + 2 + 3 + 4
not smaller than 10? - Is 5 to the power of 3 different from 125? - Is x
+ y not greater or equal to x/y?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>We can ask the first two question in positive, encapsulate it in
brackets, and then negate it: - <code>~(1 + 2 + 3 + 4 &lt; 10)</code> -
<code>~(5^3 == 125)</code></p>
<p>Asking if two things are different is so common, that matlab has a
special symbol for it. So the second question, we could have asked
instead with - <code>5^3 ~= 125</code></p>
<ul>
<li>We can ask if x+y is greater or equal to x/y with
<code>x+y &gt; x/y || x+y == x/y</code>, so asking if x + y not greater
or equal to x/y we do by negating the above with brackets:
<code>~(x+y &gt; x/y || x+y == x/y)</code>
</li>
</ul>
<p>That last one seems a bit too complicated, and it is all beacuse we
need to <em>include the limit</em>, that is, because we want to include
values that are greater <strong><em>and</em></strong> equal to
something. There is actually a special symbol in matlab for that
<code>&gt;=</code>, and of cours for smaller or equal too
<code>&lt;=</code>.</p>
<p>Using this symbol, our last answer becomes
<code>~(x+y &gt;= x/y)</code>, which does not look nearly as scary.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="arrays">Arrays<a class="anchor" aria-label="anchor" href="#arrays"></a>
</h3>
<p>You may notice that all of the variable types start with a
<code>1x1</code>. This is because matlab thinks in terms of
<em>groups</em> of variables called arrays, or matrices.</p>
<p>We can create an array using square brackets and separating each
value with a comma:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">A</span> <span class="op">=</span> [<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">3</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>A =
     1     2     3</code></pre>
</div>
<p>If you now hover over the data type icon, you’ll find that it shows
<code>1x3</code>. This means that the array A has 1
<strong><em>row</em></strong> and 3
<strong><em>columns</em></strong>.</p>
<p>We can create matrices using semi-colons to separate rows:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">B</span> <span class="op">=</span> [<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span><span class="op">;</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">4</span><span class="op">;</span> <span class="fl">5</span><span class="op">,</span> <span class="fl">6</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>B =
     1     2
     3     4
     5     6</code></pre>
</div>
<p>You’ll notice that B has three rows and two columns, which explains
the <code>3x2</code> we get from the workspace.</p>
<p>We can also create arrays of other types of data. For example, we
could create an array of names:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">Names</span> <span class="op">=</span> [<span class="st">"Jhon"</span><span class="op">,</span> <span class="st">"Abigail"</span><span class="op">,</span> <span class="st">"Bertrand"</span><span class="op">,</span> <span class="st">"Lucile"</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Names =
  1×4 string array
    "Jhon"    "Abigail"    "Bertrand"    "Lucile"</code></pre>
</div>
<p>Or we can use logical values too:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">C</span> <span class="op">=</span> [<span class="va">true</span><span class="op">;</span> <span class="va">false</span><span class="op">;</span> <span class="va">false</span><span class="op">;</span> <span class="va">true</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>C =
  4×1 logical array
   1
   0
   0
   1</code></pre>
</div>
<p>Something to bear in mind, however, is that all values in an array
must be of the same type.</p>
<p>I mentioned before that matlab is actually used to working with
arrays rather than individual variables. Well, if it is so used to them,
can we do operations with them?</p>
<p>The answer is of course yes! In fact, this is what makes MATLAB a
particularly interesting programming language.</p>
<p>We can, for example, check the whole matrix B and look for values
greater than, say, 3.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">B</span> <span class="op">&gt;</span> <span class="fl">3</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
  3×2 logical array
   0   0
   0   1
   1   1</code></pre>
</div>
<p>Matlab then compared each element of B and asked “is this element
greater than 3?”. The result is another array, of the same size and
dimensions as B, with the answers.</p>
<p>We can also do sums, multiplications, and pretty much anything we
want with an array, but we need to be careful with what we do.</p>
<p>Despite this being so interesting and increadibly powerful, this
course will focus on more basic programming concepts, and so we will use
the feature rather little. However, it is very important that you keep
it in mind, and that you do ask questions about it during the break if
you are interested.</p>
<div id="suppressing-the-output" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="suppressing-the-output" class="callout-inner">
<h3 class="callout-title">Suppressing the output</h3>
<div class="callout-content">
<p>In general, the output can be a bit redundant (or even annoying!),
and it can make the code slower, so it is considered good form to always
supress it. To supress it, we add a semi-colon at the end of the
line:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span> <span class="op">=</span> <span class="fl">33</span><span class="op">;</span></span></code></pre>
</div>
<p>At first glance nothing appears to have happened, but the workspace
shows the new value was assigned.</p>
</div>
</div>
</div>
<div id="printing-a-variables-value" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="printing-a-variables-value" class="callout-inner">
<h3 class="callout-title">Printing a variable’s value</h3>
<div class="callout-content">
<p>If we really want to print the variable, then we can simply type its
name and hit <kbd>Enter</kbd>,</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_name</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span></span>
<span><span class="va">patient_name</span> <span class="op">=</span></span>
<span></span>
<span>    <span class="st">"Jane Doe"</span></span></code></pre>
</div>
<p>or using the <code>disp</code>
<strong><em>function</em></strong>.</p>
<p>Functions are pre-defined algorithms (chunks of code), that can be
used multiple times. They usually take some “inputs” inside brackets,
and either produce something or output something.</p>
<p>The <a href="https://uk.mathworks.com/help/matlab/ref/disp.html" class="external-link">disp</a>
function, in particular, takes just one input – the variable that you
want to print – and what it does is to print the variable in a nice way.
For the variable patient_name, we would use it like this:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">patient_name</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Jane Doe</code></pre>
</div>
<p>Note how the output is a bit different from what we got when we just
typed the variable name. There is less indentation and less empty
lines.</p>
</div>
</div>
</div>
<div id="keeping-things-tidy" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="keeping-things-tidy" class="callout-inner">
<h3 class="callout-title">Keeping things tidy</h3>
<div class="callout-content">
<p>We have declared a few variables now, and we might not be using all
of them. If we want to delete a variable we can do so by typing
<code>clear</code> and the name of the variable, e.g.:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clear</span> <span class="va">alive_on_day_3</span></span></code></pre>
</div>
<p>You might be able to see it disappear from the workspace. If you now
try to use alive_on_day_3, matlab will error.</p>
<p>We can also delete <strong>all</strong> our variables with the
command <code>clear</code>, without any variable names. Be careful
though, there’s no way back!</p>
<p>Another thing you might want to clear every once in a while is the
output. To do that, we use the command <code>clc</code>.</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clc</span></span></code></pre>
</div>
<p>Again, there is no way back!</p>
</div>
</div>
</div>
<div id="keypoints2" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Variables store data for future use. Their names must start with a
letter, and can have underscores and numbers.”</li>
<li>“We can add, substract, multiply, divide and potentiate
numbers.”</li>
<li>“We can also compare variables with <code>&lt;</code>,
<code>&gt;</code>, <code>==</code>, <code>&gt;=</code>,
<code>&lt;=</code>, <code>~=</code>, and use <code>~</code> to negate
the result.”</li>
<li>“MATLAB stores data in arrays. The data in an array has to be of the
same type.”</li>
<li>“You can supress output with <code>;</code>, and print a variable
with <code>disp</code>.”</li>
<li>“Use <code>clear</code> to delete variables, and <code>clc</code> to
clear the console.”</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-02-visualisation"><p>Content from <a href="02-visualisation.html">Visualisation</a></p>
<hr>
<p>Last updated on 2023-09-11 |

        <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/edit/main/episodes/02-visualisation.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How does an image with pleural effusion differ from one
without?”</li>
<li>“How is image data represented in a NumPy array?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Visually compare normal X-rays with those labelled with pleural
effusion.”</li>
<li>“Understand how to use NumPy to store and manipulate image
data.”</li>
<li>“Compare a slice of numerical data to its corresponding image.”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“In NumPy, RGB images are usually stored as 3-dimensional
arrays.”</li>
</ul>
</div>
</div>
</div>
<section><h2 class="section-heading" id="visualising-the-x-rays">Visualising the X-rays<a class="anchor" aria-label="anchor" href="#visualising-the-x-rays"></a>
</h2>
<hr class="half-width">
<p>In the previous section, we set up a dataset comprising 700 chest
X-rays. Half of the X-rays are labelled “normal” and half are labelled
as “pleural effusion”. Let’s take a look at some of the images.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># cv2 is openCV, a popular computer vision library</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="im">import</span> cv2</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt </span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="kw">def</span> plot_example(example, label, loc):</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    image <span class="op">=</span> cv2.imread(example)</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>    im <span class="op">=</span> ax[loc].imshow(image)</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>    title <span class="op">=</span> <span class="ss">f"Class: </span><span class="sc">{</span>label<span class="sc">}</span><span class="ch">\n</span><span class="sc">{</span>example<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>    ax[loc].set_title(title)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>fig.set_size_inches(<span class="dv">10</span>, <span class="dv">10</span>)</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co"># Plot a "normal" record</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>plot_example(random.choice(normal_list), <span class="st">"Normal"</span>, <span class="dv">0</span>)</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="co"># Plot a record labelled with effusion</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>plot_example(random.choice(effusion_list), <span class="st">"Effusion"</span>, <span class="dv">1</span>)</span></code></pre>
</div>
<figure><img src="../fig/example_records.png" alt="Example X-rays" class="figure mx-auto d-block"><div class="figcaption">Example X-rays</div>
</figure></section><section><h2 class="section-heading" id="can-we-detect-effusion">Can we detect effusion?<a class="anchor" aria-label="anchor" href="#can-we-detect-effusion"></a>
</h2>
<hr class="half-width">
<p>Run the following code to flip a coin to select an x-ray from our
collection.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Effusion or not?"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co"># flip a coin</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>coin_flip <span class="op">=</span> random.choice([<span class="st">"Effusion"</span>, <span class="st">"Normal"</span>])</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="cf">if</span> coin_flip <span class="op">==</span> <span class="st">"Normal"</span>:</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    fn <span class="op">=</span> random.choice(normal_list)</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>    fn <span class="op">=</span> random.choice(effusion_list)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co"># plot the image</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>image <span class="op">=</span> cv2.imread(fn)</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>plt.imshow(image)</span></code></pre>
</div>
<p>Show the answer:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Jupyter doesn't allow us to print the image until the cell has run,</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># so we'll print in a new cell.</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The answer is: </span><span class="sc">{</span>coin_flip<span class="sc">}</span><span class="ss">!"</span>)</span></code></pre>
</div>
<div id="exercise-manual-classification" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-manual-classification" class="callout-inner">
<h3 class="callout-title">Exercise: Manual classification</h3>
<div class="callout-content">
<ol start="17" style="list-style-type: upper-alpha">
<li>Run the coin flip code 10 times and each time try to identify by eye
whether the images are effusion or not. Make a note of your predictive
accuracy &gt;(hint: for a reminder of the formula for accuracy, check
the solution below).</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ol style="list-style-type: upper-alpha">
<li>Accuracy is the fraction of predictions that were correct (correct
predictions / total predictions). &gt; If you made 10 predictions and 5
were correct, your accuracy is 50%.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="how-does-a-computer-see-an-image">How does a computer see an image?<a class="anchor" aria-label="anchor" href="#how-does-a-computer-see-an-image"></a>
</h2>
<hr class="half-width">
<p>Consider an image as a matrix in which the value of each pixel
corresponds to a number that determines a tone or color. Let’s load one
of our images:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np </span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>file_idx <span class="op">=</span> <span class="dv">56</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>example <span class="op">=</span> normal_list[file_idx]</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>image <span class="op">=</span> cv2.imread(example)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="bu">print</span>(image.shape)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(512, 512, 3)</code></pre>
</div>
<p>Here we see that the image has 3 dimensions. The first dimension is
height (512 pixels) and the second is width (also 512 pixels). The
presence of a third dimension indicates that we are looking at a color
image (“RGB”, or Red, Green, Blue).</p>
<p>For more detail on image representation in Python, take a look at the
<a href="https://datacarpentry.org/image-processing/" class="external-link">Data Carpentry
course on Image Processing with Python</a>. The following image is
reproduced from the <a href="https://datacarpentry.org/image-processing/03-skimage-images/index.html" class="external-link">section
on Image Representation</a>.</p>
<figure><img src="../fig/chair-layers-rgb.png" alt="RGB image" class="figure mx-auto d-block"><div class="figcaption">RGB image</div>
</figure><p>For simplicity, we’ll instead load the images in greyscale. A
greyscale image has two dimensions: height and width. Each value in the
matrix represents a tone between black (0) and white (255).</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>image <span class="op">=</span> cv2.imread(example, cv2.IMREAD_GRAYSCALE)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="bu">print</span>(image.shape)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(512, 512)</code></pre>
</div>
<p>Let’s briefly display the matrix of values, and then see how these
same values are rendered as an image.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Print a 10 by 10 chunk of the matrix</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="bu">print</span>(image[<span class="dv">35</span>:<span class="dv">45</span>, <span class="dv">30</span>:<span class="dv">40</span>])</span></code></pre>
</div>
<figure><img src="../fig/greyscale_example_numpy.png" alt="Example greyscale numpy array" class="figure mx-auto d-block"><div class="figcaption">Example greyscale numpy array</div>
</figure><div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Plot the same chunk as an image</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>plt.imshow(image[<span class="dv">35</span>:<span class="dv">45</span>, <span class="dv">30</span>:<span class="dv">40</span>], cmap<span class="op">=</span><span class="st">'gray'</span>, vmin<span class="op">=</span><span class="dv">0</span>, vmax<span class="op">=</span><span class="dv">255</span>)</span></code></pre>
</div>
<figure><img src="../fig/greyscale_example.png" alt="Example greyscale image" class="figure mx-auto d-block"><div class="figcaption">Example greyscale image</div>
</figure></section><section><h2 class="section-heading" id="image-pre-processing">Image pre-processing<a class="anchor" aria-label="anchor" href="#image-pre-processing"></a>
</h2>
<hr class="half-width">
<p>In the next episode, we’ll be building and training a model. Let’s
prepare our data for the modelling phase. For convenience, we’ll begin
by loading all of the images and corresponding labels and assigning them
to a list.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># create a list of effusion images and labels</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>dataset_effusion <span class="op">=</span> [cv2.imread(fn, cv2.IMREAD_GRAYSCALE) <span class="cf">for</span> fn <span class="kw">in</span> effusion_list]</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>label_effusion <span class="op">=</span> np.ones(<span class="bu">len</span>(dataset_effusion))</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co"># create a list of normal images and labels</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>dataset_normal <span class="op">=</span> [cv2.imread(fn, cv2.IMREAD_GRAYSCALE) <span class="cf">for</span> fn <span class="kw">in</span> normal_list]</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>label_normal <span class="op">=</span> np.zeros(<span class="bu">len</span>(dataset_normal))</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co"># Combine the lists</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>dataset <span class="op">=</span> dataset_effusion <span class="op">+</span> dataset_normal</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>labels <span class="op">=</span> np.concatenate([label_effusion, label_normal])</span></code></pre>
</div>
<p>Let’s also downsample the images, reducing the size from (512, 512)
to (256,256).</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Downsample the images from (512,512) to (256,256)</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>dataset <span class="op">=</span> [cv2.resize(img, (<span class="dv">256</span>,<span class="dv">256</span>)) <span class="cf">for</span> img <span class="kw">in</span> dataset]</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># Check the size of the reshaped images</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="bu">print</span>(dataset[<span class="dv">0</span>].shape)</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co"># Normalize the data</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co"># Subtract the mean, divide by the standard deviation.</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(dataset)):</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  dataset[i] <span class="op">=</span> (dataset[i] <span class="op">-</span> np.average(dataset[i], axis<span class="op">=</span> (<span class="dv">0</span>, <span class="dv">1</span>))) <span class="op">/</span> np.std(dataset[i], axis<span class="op">=</span> (<span class="dv">0</span>, <span class="dv">1</span>)) </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(256, 256)</code></pre>
</div>
<p>Finally, we’ll convert our dataset from a list to an array. We are
expecting it to be (700, 256, 256). That is 700 images (350 effusion
cases and 350 normal), each with a dimension of 256 by 256.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>dataset <span class="op">=</span> np.asarray(dataset, dtype<span class="op">=</span>np.float32)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Matrix Dimensions: </span><span class="sc">{</span>dataset<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(700, 256, 256)</code></pre>
</div>
<p>We could plot the images by indexing them on <code>dataset</code>,
e.g., we can plot the first image in the dataset with:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>idx <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>vals <span class="op">=</span> dataset[idx].flatten()</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>plt.imshow(dataset[idx], cmap<span class="op">=</span><span class="st">'gray'</span>, vmin<span class="op">=</span><span class="bu">min</span>(vals), vmax<span class="op">=</span><span class="bu">max</span>(vals))</span></code></pre>
</div>
<figure><img src="../fig/final_example_image.png" alt="Final example image" class="figure mx-auto d-block"><div class="figcaption">Final example image</div>
</figure></section><section><h2 class="section-heading" id="matlab">MATLAB<a class="anchor" aria-label="anchor" href="#matlab"></a>
</h2>
<hr class="half-width"></section><section><h2 class="section-heading" id="initializing-an-array">Initializing an Array<a class="anchor" aria-label="anchor" href="#initializing-an-array"></a>
</h2>
<hr class="half-width">
<p>We just talked about how matlab <em>thinks</em> in arrays, and
declared some very simple arrays using square brackets. In some cases,
we will want to create space to save data, but not save anything just
yet. One way of doing so is with <code>zeros</code>. The function <a href="https://uk.mathworks.com/help/matlab/ref/zeros.html" class="external-link">zeros</a>
takes the dimensions of our array as arguments, and populates it with
zeros. For example,</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">Z</span> <span class="op">=</span> <span class="va">zeros</span>(<span class="fl">3</span><span class="op">,</span><span class="fl">5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Z =
     0     0     0     0     0
     0     0     0     0     0
     0     0     0     0     0</code></pre>
</div>
<p>creates a matrix of 3 rows and 5 columns, all with zeros. If we had
only passed one dimension, matlab assumes you want a square matrix,
so</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">Z</span> <span class="op">=</span> <span class="va">zeros</span>(<span class="fl">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Z =
     0     0     0
     0     0     0
     0     0     0</code></pre>
</div>
<p>yields a 3x3 array. If we want a single row and 5 columns, we need to
remember that matlab reads <code>rows</code>x<code>columns</code>,
so</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">Z</span> <span class="op">=</span> <span class="va">zeros</span>(<span class="fl">1</span><span class="va">x5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Z =
     0     0     0     0     0</code></pre>
</div>
<p>This logic of the <code>zeros</code> function is shared with many
other functions that create arrays.</p>
<p>For example, the <a href="https://uk.mathworks.com/help/matlab/ref/ones.html" class="external-link"><code>ones</code>
function</a> is quite similar, but the arrays are filled with ones, and
the <a href="https://uk.mathworks.com/help/matlab/ref/rand.html" class="external-link"><code>rand</code>
function</a> assigns uniformly distributed random numbers between zero
and 1.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">R</span> <span class="op">=</span> <span class="va">rand</span>(<span class="fl">8</span>)<span class="op">;</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">O</span> <span class="op">=</span> <span class="va">ones</span>(<span class="fl">10</span><span class="op">,</span><span class="fl">10</span>)<span class="op">;</span></span></code></pre>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note:</strong> This is when supressing the output becomes
more important. You can more comfortably explore the variables
<code>R</code> and <code>O</code> by double clicking them in the
workspace.</p>
</div>
</div>
</div>
<p>By the way, the <code>ones</code> function can actually help us
initialize a matrix to any value, because we can multiply a matrix by a
constant and it will multiply each element. So for example,</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">Fives</span> <span class="op">=</span> <span class="va">ones</span>(<span class="fl">3</span><span class="op">,</span><span class="fl">6</span>)<span class="op">*</span><span class="fl">5</span><span class="op">;</span></span></code></pre>
</div>
<p>Produces a 3x6 matrix full of fives.</p>
<p>The <a href="https://uk.mathworks.com/help/matlab/ref/magic.html" class="external-link"><code>magic</code>
function</a> has a similar logic, but you can only declare square
matrices with it. The magic thing about them is that the sum of the
elements on each row or column add up to the same number.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span> <span class="op">=</span> <span class="va">magic</span>(<span class="fl">4</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>M =
    16     2     3    13
     5    11    10     8
     9     7     6    12
     4    14    15     1</code></pre>
</div>
<p>In this case, each row or column add up to 34. But how could I tell
in a bigger matrix? How can I select some of the elements of the array
and sum them, for example?</p>
</section><section><h2 class="section-heading" id="array-indexing">Array indexing<a class="anchor" aria-label="anchor" href="#array-indexing"></a>
</h2>
<hr class="half-width">
<p>Array <strong>indexing</strong>, is the method by which we can select
one or more different elements of an array. A solid understanding of
array indexing will be essential to work with arrays. Lets start with
selecting one element.</p>
<p>First, we will create an 8x8 “magic” matrix:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span> <span class="op">=</span> <span class="va">magic</span>(<span class="fl">8</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

   64    2    3   61   60    6    7   57
    9   55   54   12   13   51   50   16
   17   47   46   20   21   43   42   24
   40   26   27   37   36   30   31   33
   32   34   35   29   28   38   39   25
   41   23   22   44   45   19   18   48
   49   15   14   52   53   11   10   56
    8   58   59    5    4   62   63    1</code></pre>
</div>
<p>We want to access a single value from the matrix:</p>
<figure><img src="../fig/matrix-single-element.svg" alt="Accessing a single value" class="figure mx-auto d-block"></figure><p>To do that, we must provide its <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#index">index</a> in
parentheses. In a 2D array, this means the row and column of the element
separated by a comma, that is, as <code>(row, column)</code>. This index
goes after the name of our array. In our case, this is:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">,</span> <span class="fl">6</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span> <span class="fl">38</span></span></code></pre>
</div>
<p>So the index <code>(5, 6)</code> selects the element on the fifth row
and sixth column of <code>M</code>.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note:</strong> Matlab starts counting indices at 1, not 0!
(as many other programming languages).</p>
</div>
</div>
</div>
<p>An index like the one we used selects a single element of an array,
but we can also select a group of them if instead of a number we give
arrays as indices. For example, if we want to select this submatrix:</p>
<figure><img src="../fig/matrix-submatrix.svg" alt="Accessing a submatrix" class="figure mx-auto d-block"></figure><p>we want rows 4, 5 and 6, and columns 5, 6 and 7, that is, the arrays
<code>[4,5,6]</code> for rows, and <code>[5,6,7]</code> for columns:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>([<span class="fl">4</span><span class="op">,</span><span class="fl">5</span><span class="op">,</span><span class="fl">6</span>]<span class="op">,</span>[<span class="fl">5</span><span class="op">,</span><span class="fl">6</span><span class="op">,</span><span class="fl">7</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   36   30   31
   28   38   39
   45   19   18</code></pre>
</div>
<div id="the-operator" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-operator" class="callout-inner">
<h3 class="callout-title">The <code>:</code> operator</h3>
<div class="callout-content">
<p>In matlab, the symbol <code>:</code> (<a href="https://uk.mathworks.com/help/matlab/ref/colon.html" class="external-link"><code>colon</code></a>)
is used to specify a range. The range is specified as
<code>start:end</code>. For example, if we type <code>1:6</code> it
generates an array of consecutive numbers from 1 to 6:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   1     2     3     4     5     6</code></pre>
</div>
<p>We can also specify an <em>increment</em> other than one. To specify
the increment, we write the range as <code>start:increment:end</code>.
For example, if we type <code>1:3:15</code> it generates an array
starting with 1, then 1+3, then 1+2*3, and so on, until it reaches 15
(or as close as it can get to 15 without going past it):</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="fl">15</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   1     4     7    10    13</code></pre>
</div>
<p>The array stopped at 13 because 13+3=16, which is over 15.</p>
</div>
</div>
</div>
<p>The rows and columns we just selected could have been specified as
ranges. So if we want the rows from 4 to 6 and columns from 5 to 7, we
can specify the ranges as <code>4:6</code> and <code>5:7</code>. On top
of being a much quicker and neater way to get the rows and columns,
matlab knows that the range will produce an array, so we do not even
need the square brackets anymore. So the command above becomes:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">,</span> <span class="fl">5</span><span class="op">:</span><span class="fl">7</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   36   30   31
   28   38   39
   45   19   18</code></pre>
</div>
<div id="checkerboard" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="checkerboard" class="callout-inner">
<h3 class="callout-title">Checkerboard</h3>
<div class="callout-content">
<p>Select the elements highlighted on the image:</p>
<figure><img src="../fig/matrix-strided-rowncols.svg" alt="Accessing strided rows and columns" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>We need to select every other element in both dimensions. To do that,
we define the apropriate intervals with an increment of 2:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="fl">8</span><span class="op">,</span> <span class="fl">2</span><span class="op">:</span><span class="fl">2</span><span class="op">:</span><span class="fl">8</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
    2   61    6   57
   26   37   30   33
   15   52   11   56</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="selecting-whole-rows-or-columns">Selecting whole rows or columns<a class="anchor" aria-label="anchor" href="#selecting-whole-rows-or-columns"></a>
</h3>
<p>If we want a whole row, for example:</p>
<figure><img src="../fig/matrix-row.svg" alt="Accessing a row" class="figure mx-auto d-block"></figure><p>we could in principle pick the 5th row and for the columns use the
range <code>1:8</code>.</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">,</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   32   34   35   29   28   38   39   25</code></pre>
</div>
<p>However, we need to know that there are 8 columns, which is not very
robust.</p>
<div id="the-key-word-end" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-key-word-end" class="callout-inner">
<h3 class="callout-title">The key-word <code>end</code>
</h3>
<div class="callout-content">
<p>When indexing the elements of an array, the key word <code>end</code>
can be used to get the last index available.</p>
<p>For example, <code>M(2,end)</code> returns the last element of the
second row:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">2</span><span class="op">,</span><span class="kw">end</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>   <span class="fl">16</span></span></code></pre>
</div>
<p>We can also use it in combination with the <code>:</code> operator.
For example, <code>M(5:end,3)</code> returns the elements of column 3
from row 5 until the end:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">:</span><span class="kw">end</span><span class="op">,</span><span class="fl">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>   <span class="fl">35</span></span>
<span>   <span class="fl">22</span></span>
<span>   <span class="fl">14</span></span>
<span>   <span class="fl">59</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>We can then use the keyword <code>end</code> instead of the 8 to get
the whole row with <code>1:end</code>.</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">,</span> <span class="fl">1</span><span class="op">:</span><span class="kw">end</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   32   34   35   29   28   38   39   25</code></pre>
</div>
<p>This is much better, now this works for any size of matrix, and we
don’t need to know the size.</p>
<div id="using-as-an-index" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="using-as-an-index" class="callout-inner">
<h3 class="callout-title">Using <code>:</code> as an index</h3>
<div class="callout-content">
<p>getting a whole row or column is such a common operation, that matlab
has a shortcut: Using <code>:</code> alone is equivalent!</p>
<p>For example, We can then get the whole fifth row with:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">,</span> <span class="op">:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>   <span class="fl">16</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>As you can see, the <code>:</code> operator is quite important when
accessing arrays!</p>
<p>We can use it to select multiple rows,</p>
<figure><img src="../fig/matrix-multi-rows.svg" alt="Accessing multiple rows" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">,</span> <span class="op">:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   64    2    3   61   60    6    7   57
    9   55   54   12   13   51   50   16
   17   47   46   20   21   43   42   24
   40   26   27   37   36   30   31   33</code></pre>
</div>
<p>or multiple columns:</p>
<figure><img src="../fig/matrix-multi-cols.svg" alt="Accessing multiple columns" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="op">:,</span> <span class="fl">6</span><span class="op">:</span><span class="kw">end</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
    6    7   57
   51   50   16
   43   42   24
   30   31   33
   38   39   25
   19   18   48
   11   10   56
   62   63    1</code></pre>
</div>
<div id="master-indexing" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="master-indexing" class="callout-inner">
<h3 class="callout-title">Master indexing</h3>
<div class="callout-content">
<p>Select the elements highlighted on the image without using the
numbers 5 or 8, and using <code>end</code> only once:</p>
<figure><img src="../fig/matrix-strided-rows.svg" alt="Accessing strided columns" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>We need to tart with row <code>2</code>, and subsequently select
every third row:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="kw">end</span><span class="op">,</span> <span class="op">:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
    9   55   54   12   13   51   50   16
   32   34   35   29   28   38   39   25
    8   58   59    5    4   62   63    1</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="slicing-character-arrays" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="slicing-character-arrays" class="callout-inner">
<h3 class="callout-title">Slicing character arrays</h3>
<div class="callout-content">
<p>A subsection of an array is called a <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#slice">slice</a>. We
can take slices of character arrays as well:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">element</span> <span class="op">=</span> <span class="ss">'oxygen'</span><span class="op">;</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>([<span class="ss">'first three characters: '</span><span class="op">,</span> <span class="va">element</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>)])</span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>([<span class="ss">'last three characters: '</span><span class="op">,</span> <span class="va">element</span>(<span class="fl">4</span><span class="op">:</span><span class="fl">6</span>)])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>first three characters: oxy
last three characters: gen</code></pre>
</div>
<ol style="list-style-type: decimal">
<li>Use slicing to:</li>
</ol>
<ul>
<li>Select all elements from the 3rd to the last one.</li>
<li>Find out what is the value of <code>element(1:2:end)</code>?</li>
<li>Figure out how would you get all characters except the first and
last?</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>We used the single colon operator <code>:</code> in the indices to
get all the available column or row numbers, but we can also use it like
this: <code>M(:)</code>. What do you think will happen? How many
elements does <code>M(:)</code> have? What would happen if we use it for
the element variable? Compare the result from <code>element</code> and
<code>element(:)</code>. Are there any differences?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Exercises using slicing</li>
</ol>
<ul>
<li><p>To select all elements from 3rd to last we can use start our
range at <code>3</code> and use the keyword <code>end</code>:
<code>matlab     &gt;&gt; element(3:end)</code>
<code>output     ans =         'ygen'</code></p></li>
<li><p>The command <code>element(1:2:end)</code> starts at the first
character, selects every other element (notice the interval is 2), and
goes all the way until the last element, so:
<code>matlab     &gt;&gt; element(1:2:end)</code>
<code>output     ans =         'oye'</code></p></li>
<li><p>To select each character starting with the second we set the
start at <code>2</code>, and to not include the last one we can finish
at <code>end-1</code>: <code>matlab     &gt;&gt; element(2:end-1)</code>
<code>output     ans =         'xyge'</code></p></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>
<p>The colon operator gets all the elements that it can find, and so
using it as <code>M(:)</code> returns all the elements of M. We can make
sure that the result of <code>M(:)</code> has 8x8=64 elements by using
the function <a href="https://uk.mathworks.com/help/matlab/ref/size.html" class="external-link">size</a>,
which returns the dimensions of the array given as an input:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">size</span>(<span class="va">M</span>(<span class="op">:</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
    64    1</code></pre>
</div>
<p>So it has 64 rows and 1 column. Efectively, then, <code>M(:)</code>
‘flattens’ the array into a column vector. The order of the elements in
the resulting vector comes from appending each column of the original
array in turn. Therefore, the last 8 elements we see if we evaluate
<code>M(:)</code> correspond to the last column of <code>M</code>, for
example.</p>
<p>The difference between evaluating <code>element</code> and
<code>element(:)</code> is that the former is a row vector, and the
latter a column vector.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints2" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Some functions to initialize matrices include zeros, ones, and
rand. They all produce a square matrix if only one argument is given,
but you can specify the dimensions you want separated by a comma.”</li>
<li>“To select data points we use <code>M(rows, columns)</code>, where
rows and columns are the indices of the elements we want. They can be
just numbers or arrays of numbers.”</li>
<li>“We use the colon operator to select ranges of elements as
<code>start:end</code> or <code>start:increment:end</code>.”</li>
<li>“We use the keyword <code>end</code> to get the index of the last
element.”</li>
<li>“The colon operator by itself <code>:</code> selects all the
elements.”</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-03-data_prep"><p>Content from <a href="03-data_prep.html">Data preparation</a></p>
<hr>
<p>Last updated on 2023-09-11 |

        <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/edit/main/episodes/03-data_prep.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What is the purpose of data augmentation?”</li>
<li>“What types of transform can be applied in data augmentation?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Generate an augmented dataset”</li>
<li>“Partition data into training and test sets.”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="partitioning-into-training-and-test-sets">Partitioning into training and test sets<a class="anchor" aria-label="anchor" href="#partitioning-into-training-and-test-sets"></a>
</h2>
<hr class="half-width">
<p>As we have done in previous projects, we will want to split our data
into subsets for training and testing. The training set is used for
building our model and our test set is used for evaluation.</p>
<p>To ensure reproducibility, we should set the random state of the
splitting method. This means that Python’s random number generator will
produce the same “random” split in future.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># Our Tensorflow model requires the input to be:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># [batch, height, width, n_channels]</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co"># So we need to add a dimension to the dataset and labels.</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co"># Ellipsis (...) is shorthand for selecting with ":" across dimensions. </span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co"># np.newaxis expands the selection by one dimension.</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>dataset <span class="op">=</span> dataset[..., np.newaxis]</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>labels <span class="op">=</span> labels[..., np.newaxis]</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co"># Create training and validation datasets in a 70:15:15 split</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>dataset_train, dataset_temp, labels_train, labels_temp <span class="op">=</span> train_test_split(dataset, labels, test_size<span class="op">=</span><span class="fl">0.3</span>, stratify<span class="op">=</span>labels, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>dataset_val, dataset_test, labels_val, labels_test <span class="op">=</span> train_test_split(dataset_temp, labels_temp, test_size<span class="op">=</span><span class="fl">0.5</span>, stratify<span class="op">=</span>labels_temp, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"No. images, x_dim, y_dim, colors) (No. labels, 1)</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Train: </span><span class="sc">{</span>dataset_train<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>labels_train<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Validation: </span><span class="sc">{</span>dataset_val<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>labels_val<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Test: </span><span class="sc">{</span>dataset_test<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>labels_test<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>No. images, x_dim, y_dim, colors) (No. labels, 1)

Train: (505, 256, 256, 1), (505, 1)
Validation: (90, 256, 256, 1), (90, 1)
Test: (105, 256, 256, 1), (105, 1)</code></pre>
</div>
</section><section><h2 class="section-heading" id="data-augmentation">Data Augmentation<a class="anchor" aria-label="anchor" href="#data-augmentation"></a>
</h2>
<hr class="half-width">
<p>We have a small dataset, which increases the chance of overfitting
our model. If our model is overfitted, it becomes less able to
generalize to data outside the training data.</p>
<p>To artificially increase the size of our training set, we can use
<code>ImageDataGenerator</code>. This function generates new data by
applying random transformations to our source images while our model is
training.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">from</span> tensorflow.keras.preprocessing.image <span class="im">import</span> ImageDataGenerator</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co"># Define what kind of transformations we would like to apply</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># such as rotation, crop, zoom, position shift, etc</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>datagen <span class="op">=</span> ImageDataGenerator(</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    rotation_range<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>    width_shift_range<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>    height_shift_range<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>    zoom_range<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>    horizontal_flip<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
<p>For the sake of interest, let’s take a look at some examples of the
augmented images!</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># specify path to source data</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>path <span class="op">=</span> os.path.join(<span class="st">"chest_xrays"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>batch_size<span class="op">=</span><span class="dv">5</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>val_generator <span class="op">=</span> datagen.flow_from_directory(</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>        path, color_mode<span class="op">=</span><span class="st">"rgb"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>        target_size<span class="op">=</span>(<span class="dv">256</span>, <span class="dv">256</span>),</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>        batch_size<span class="op">=</span>batch_size)</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="kw">def</span> plot_images(images_arr):</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>    fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">5</span>, figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">20</span>))</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>    axes <span class="op">=</span> axes.flatten()</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>    <span class="cf">for</span> img, ax <span class="kw">in</span> <span class="bu">zip</span>(images_arr, axes):</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>        ax.imshow(img.astype(<span class="st">'uint8'</span>))</span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>    plt.show()</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>augmented_images <span class="op">=</span> [val_generator[<span class="dv">0</span>][<span class="dv">0</span>][<span class="dv">0</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(batch_size)]</span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>plot_images(augmented_images)</span></code></pre>
</div>
<figure><img src="../fig/xray_augmented.png" alt="X-ray augmented" class="figure mx-auto d-block"><div class="figcaption">X-ray augmented</div>
</figure><p>The images look a little strange, but that’s the idea! When our model
sees something unusual in real-life, it will be better adapted to deal
with it.</p>
<p>Now we have some data to work with, let’s start building our
model.</p>
</section><section><h2 class="section-heading" id="matlab">MATLAB<a class="anchor" aria-label="anchor" href="#matlab"></a>
</h2>
<hr class="half-width"></section><section><h2 class="section-heading" id="loading-data-to-an-array">Loading data to an array<a class="anchor" aria-label="anchor" href="#loading-data-to-an-array"></a>
</h2>
<hr class="half-width">
<p>Reading data from files and writing data to them are essential tasks
in scientific computing, and something that we’d rather not spend a lot
of time thinking about. Fortunately, MATLAB comes with a number of
high-level tools to do these things efficiently, sparing us the grisly
detail.</p>
<p>Before we get started, however, let’s create some directories to help
organise this project.</p>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout-inner">
<h3 class="callout-title">Tip: Good Enough Practices for Scientific Computing</h3>
<div class="callout-content">
<p><a href="https://swcarpentry.github.io/good-enough-practices-in-scientific-computing/" class="external-link">Good
Enough Practices for Scientific Computing</a> is a paper written by
researchers involved with the Carpentries, which covers basic workflow
skills for research computing. It recommends the following for project
organization:</p>
<ol style="list-style-type: decimal">
<li>Put each project in its own directory, which is named after the
project.</li>
<li>Put text documents associated with the project in the
<code>doc</code> directory.</li>
<li>Put raw data and metadata in the <code>data</code> directory, and
files generated during clean-up and analysis in a <code>results</code>
directory.</li>
<li>Put source code for the project in the <code>src</code> directory,
and programs brought in from elsewhere or compiled locally in the
<code>bin</code> directory.</li>
<li>Name all files to reflect their content or function.</li>
</ol>
</div>
</div>
</div>
<p>We already have a <code>data</code> directory in our
<code>matlab-novice-inflammation</code> project directory, so we only
need to create <code>results</code> and <code>src</code> directories for
this project. You can use your computer’s file browser to create this
directory.</p>
<p>A final step is to set the <em>current folder</em> in MATLAB to our
project folder. Use the <strong>Current Folder</strong> window in the
MATLAB GUI to browse to your project folder (the one now containing the
‘data’ and ‘results’ directories).</p>
<p>To verify the current directory in matlab we can run <code>pwd</code>
(print working directory). A second check we can do is to run the
<code>ls</code> (list) command in the Command Window to list the
contents of the working directory — we should get the following
output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>data   results src</code></pre>
</div>
<p>We are now set to load our data.</p>
<p>If we know what our data looks like (in this case, we have a matrix
stored as comma-separated values) and we’re unsure about what command we
want to use, we can search the documentation. Type
<code>read matrix</code> into the documentation toolbar. MATLAB suggests
using <code>readmatrix</code>. If we have a closer look at the
documentation, MATLAB also tells us, which inputs and output this
function has.</p>
<p>For the <code>readmatrix</code> function we need to provide a single
argument: the <strong><em>path</em></strong> to the file we want to read
data from. Since our data is in the ‘data’ folder, the path will begin
with “data/”, and will be followed by the name of the file:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span></code></pre>
</div>
<p>This loads the data and assigns it to a variable,
<em>patient_data</em>. This is a good example of when to use a
semi-colon to suppress output — try re-running the command without the
semi-colon to find out why. You should see a wall of numbers printed,
which is the data from the file.</p>
<p>We can see in the workspace that the variable has 60 rows and 40
columns. If you can’t see the workspace, you can check this with
<code>size</code>, as we did before:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">size</span>(<span class="va">patient_data</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
    60 40</code></pre>
</div>
<p>You might also recognise the icon in the workspace telling you that
the variable is of type double. If you don’t, you can use the
<code>class</code> function to find out what type of data lives inside
an array:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">class</span>(<span class="va">patient_data</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>    <span class="st">'double'</span></span></code></pre>
</div>
<p>Again, this just means that you can store very small or very large
numbers, called double precision floating-point numbers.</p>
</section><section><h2 class="section-heading" id="initial-exploration">Initial exploration<a class="anchor" aria-label="anchor" href="#initial-exploration"></a>
</h2>
<hr class="half-width">
<p>We know that in our data each row represents a patient and each
column a different day.</p>
<div class="section level4">
<h4 id="one-patient-at-a-time">
<strong>One patient at a time</strong><a class="anchor" aria-label="anchor" href="#one-patient-at-a-time"></a>
</h4>
<p>We know how to access sections of our data, so lets look at a single
patient first. If we want to look at a single patients’ data, then, we
have to get all the columns for a given row, with:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_5</span> <span class="op">=</span> <span class="va">patient_data</span>(<span class="fl">5</span><span class="op">,:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>patient_5 =
  Columns 1 through 25
     0     1     1     3     3     1     3     5     2     4     4     7     6     5     3    10     8    10     6    17     9    14     9     7    13
  Columns 26 through 40
     9    12     6     7     7     9     6     3     2     2     4     2     0     1     1</code></pre>
</div>
<p>Looking at these 40 numbers tells us very little, so we might want to
look at the mean instead, for example.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean_p5</span><span class="op">=</span><span class="va">mean</span>(<span class="va">patient_5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">mean_p5</span> <span class="op">=</span></span>
<span>    <span class="fl">5.5500</span></span></code></pre>
</div>
<p>We can also compute other statistics, like the maximum, minimum and
standard deviation.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">max_p5</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_5</span>)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">min_p5</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_5</span>)</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">std_p5</span> <span class="op">=</span> <span class="va">std</span>(<span class="va">patient_5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">max_p5</span> <span class="op">=</span></span>
<span>    <span class="fl">17</span></span>
<span><span class="va">min_p5</span> <span class="op">=</span></span>
<span>     <span class="fl">0</span></span>
<span><span class="va">std_p5</span> <span class="op">=</span></span>
<span>    <span class="fl">4.1072</span></span></code></pre>
</div>
<div id="all-data-points-at-once" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="all-data-points-at-once" class="callout-inner">
<h3 class="callout-title">All data points at once</h3>
<div class="callout-content">
<p>Can you think of a way to get the mean of the whole data? What about
the <code>max</code>, <code>min</code> and <code>std</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>We already know that the colon operator as an index returns all the
elements, so <code>patient_data(:)</code> will return a vector with all
the data points. To compute the mean, we then use:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">global_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">global_mean</span> <span class="op">=</span></span>
<span>    <span class="fl">6.1487</span></span></code></pre>
</div>
<p>This works for <code>max</code>, <code>min</code> and
<code>std</code> too:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">global_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>))</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">global_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>))</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">global_std</span> <span class="op">=</span> <span class="va">std</span>(<span class="va">patient_data</span>(<span class="op">:</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">global_max</span> <span class="op">=</span></span>
<span>    <span class="fl">20</span></span>
<span><span class="va">global_min</span> <span class="op">=</span></span>
<span>     <span class="fl">0</span></span>
<span><span class="va">global_std</span> <span class="op">=</span></span>
<span>    <span class="fl">4.6148</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Now that we have the global statistics, we can check how patient 5
compares with them:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean_p5</span> <span class="op">&gt;</span> <span class="va">global_mean</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">max_p5</span> <span class="op">==</span> <span class="va">global_max</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">min_p5</span> <span class="op">==</span> <span class="va">global_min</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">std_p5</span> <span class="op">&lt;</span> <span class="va">global_std</span></span></code></pre>
</div>
<pre><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
<p>So we know that patient 5 did not suffer more inflamation than
average, that it is not the patient who got the most inflamed, that he
had the global minimum inflamation at some point (0), and that the std
of his inflamation is not below the average.</p>
<div id="food-for-thought" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="food-for-thought" class="callout-inner">
<h3 class="callout-title">Food for thought</h3>
<div class="callout-content">
<p>How would you find the patient who got the highest inflamation?</p>
<p>Would you be happy to do it if you had 1000 patients?</p>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="one-day-at-a-time">
<strong>One day at a time</strong><a class="anchor" aria-label="anchor" href="#one-day-at-a-time"></a>
</h4>
<p>We could also have looked not at a single patient, but at a single
day. The approach would be very similar, but instead of selecting all
the columns in a row, we want to select all the rows for a given
column:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">day_9</span> <span class="op">=</span> <span class="va">patient_data</span>(<span class="op">:,</span><span class="fl">9</span>)<span class="op">;</span></span></code></pre>
</div>
<p>The result is now not a row of 40 elements, but a column with 60
items. However, matlab is smart enough to figure out what to do with
enquieries just like the ones we did before.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean_d9</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">day_9</span>)</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">max_d9</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">day_9</span>)</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">min_d9</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">day_9</span>)</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">std_d9</span> <span class="op">=</span> <span class="va">std</span>(<span class="va">day_9</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">mean_d9</span> <span class="op">=</span></span>
<span>     <span class="fl">5.2333</span></span>
<span><span class="va">max_d9</span> <span class="op">=</span></span>
<span>     <span class="fl">8</span></span>
<span><span class="va">min_d9</span> <span class="op">=</span></span>
<span>     <span class="fl">2</span></span>
<span><span class="va">std_d9</span> <span class="op">=</span></span>
<span>    <span class="fl">1.9430</span></span></code></pre>
</div>
<p>We could now check how day 9 compares to the global values:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean_d9</span> <span class="op">&gt;</span> <span class="va">global_mean</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">max_d9</span> <span class="op">==</span> <span class="va">global_max</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">min_d9</span> <span class="op">==</span> <span class="va">global_min</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">std_d9</span> <span class="op">&lt;</span> <span class="va">global_std</span></span></code></pre>
</div>
<pre><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
<p>So we know that day 9 was still relatively low inflamation, that it
is not the day with the highest inflamation, that every patient was at
least a bit inflamed at that moment, and that the std of his inflamation
is below the average (so datapoints are closer to each other).</p>
<div id="food-for-thought-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="food-for-thought-1" class="callout-inner">
<h3 class="callout-title">Food for thought</h3>
<div class="callout-content">
<p>How would you find which days had an inflamation value above the
global mean?</p>
<p>Would you be happy to do it if you had 1000 days worth of data?</p>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="whole-array-analisis">
<strong>Whole array analisis</strong><a class="anchor" aria-label="anchor" href="#whole-array-analisis"></a>
</h4>
<p>The analisis we’ve done until now would be very tedious to repeat for
each patient or day. Luckily, we’ve been telling you that matlab is used
to thinking in terms of arrays. Surely then, it must be possible to get
the mean of each patient or each day in one go. It is definitely
tempting to simply call the mean on the array, so let’s try it:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span><span class="op">=</span><span class="va">mean</span>(<span class="va">patient_data</span>)<span class="op">;</span></span></code></pre>
</div>
<p>We’ve supressed the output, but the workspace (or use of
<code>size</code>) tells us that the result is a 1x40 array. Matlab
assumed that we want column averages, and indeed that is something we
might want.</p>
<p>The other statistics behave in the same way, so we can more
appropriately label our variables as:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_day_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>)<span class="op">;</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_day_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>)<span class="op">;</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_day_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>)<span class="op">;</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_day_std</span> <span class="op">=</span> <span class="va">std</span>(<span class="va">patient_data</span>)<span class="op">;</span></span></code></pre>
</div>
<p>You’ll notice that each of the above avriables is a <code>1x40</code>
array.</p>
<p>Now that we have the information for each day in an array, we can
take advantage of Matlab’s capacity to do array operations. For example,
we can find out which days had an inflamation above the global
average:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_day_mean</span> <span class="op">&gt;</span> <span class="va">global_mean</span></span></code></pre>
</div>
<pre><code>ans =
  1×40 logical array
  Columns 1 through 14
   0   0   0   0   0   0   0   0   0   0   0   0   1   1

  Columns 15 through 28
   1   1   1   1   1   1   1   1   1   1   1   1   1   1

  Columns 29 through 40
   1   1   0   0   0   0   0   0   0   0   0   0</code></pre>
<p>We could count which day it is, but lets take a shortcut and use the
find function:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">find</span>(<span class="va">ans</span>)</span></code></pre>
</div>
<pre><code>ans =
  Columns 1 through 9
    13    14    15    16    17    18    19    20    21

  Columns 10 through 18
    22    23    24    25    26    27    28    29    30</code></pre>
<p>So it seems that days 13 to 30 were the critical days.</p>
<p>But what if we want the analysis per patient, instead of per day?</p>
<p>Lets look at the documentation for <code>mean</code>, either through
the documentation browser or using the <code>help</code> command</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">help</span> <span class="va">mean</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>mean   Average or mean value.
    S = mean(X) is the mean value of the elements in X if X is a vector.
    For matrices, S is a row vector containing the mean value of each
    column.
    For N-D arrays, S is the mean value of the elements along the first
    array dimension whose size does not equal 1.

    mean(X,DIM) takes the mean along the dimension DIM of X.

    S = mean(...,TYPE) specifies the type in which the mean is performed,
    and the type of S. Available options are:

    'double'    -  S has class double for any input X
    'native'    -  S has the same class as X
    'default'   -  If X is floating point, that is double or single,
                   S has the same class as X. If X is not floating point,
                   S has class double.

    S = mean(...,NANFLAG) specifies how NaN (Not-A-Number) values are
    treated. The default is 'includenan':

    'includenan' - the mean of a vector containing NaN values is also NaN.
    'omitnan'    - the mean of a vector containing NaN values is the mean
                   of all its non-NaN elements. If all elements are NaN,
                   the result is NaN.

    Example:
        X = [1 2 3; 3 3 6; 4 6 8; 4 7 7]
        mean(X,1)
        mean(X,2)

    Class support for input X:
       float: double, single
       integer: uint8, int8, uint16, int16, uint32,
                int32, uint64, int64

    See also median, std, min, max, var, cov, mode.</code></pre>
</div>
<p>The first paragraph explains why it worked for a single day or
patient. The input we used was a vector, so it took the mean.</p>
<p>The second paragraph explains why we got per-day means when we used
the whole data as input. Our array is 2D, and the first dimention is the
rows, so it averaged the rows.</p>
<p>The third paragraph is the key to what we want to do now. A second
argument <code>DIM</code> can be used to specify the direction in which
to take the mean. If we want patient averages, we want the columns to be
averaged, that is, dimension 2.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_patient_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span><span class="fl">2</span>)<span class="op">;</span></span></code></pre>
</div>
<p>As expected, the result is a <code>60x1</code> vector, with the mean
for each patient.</p>
<p>Unfortunately, <code>max</code>, <code>min</code> and
<code>std</code> do not behave quite in the same way. If you explore
their documentation, you’ll see that we need to add another argument, so
that the commands become:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_patient_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span>[]<span class="op">,</span><span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_patient_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span>[]<span class="op">,</span><span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_patient_std</span> <span class="op">=</span> <span class="va">std</span>(<span class="va">patient_data</span><span class="op">,</span>[]<span class="op">,</span><span class="fl">2</span>)<span class="op">;</span></span></code></pre>
</div>
<p>All of the above return a <code>60x1</code> vector.</p>
<div id="most-inflamed-patients" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="most-inflamed-patients" class="callout-inner">
<h3 class="callout-title">Most inflamed patients</h3>
<div class="callout-content">
<p>Can you find the patients that got the highest inflamation?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Using the power matlab has to compare arrays, we can check which
patients have a <code>max</code> equal to the <code>global_max</code>.
If we wrap this check in the find function, we get the row numbers:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">find</span>(<span class="va">per_patient_max</span> <span class="op">==</span> <span class="va">global_max</span>)</span></code></pre>
</div>
<pre><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>     <span class="fl">8</span></span>
<span>    <span class="fl">29</span></span>
<span>    <span class="fl">52</span></span></code></pre>
<p>So the patients 8, 29 and 52 got the maximum inflamation levels.</p>
</div>
</div>
</div>
</div>
<p>We can gain some insight exploring the data like we have so far, but
we all know that an image speaks more than a thousend numbers, so we’ll
learn to make some plots.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Data augmentation can help to avoid overfitting.”</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-04-create_net"><p>Content from <a href="04-create_net.html">Neural networks</a></p>
<hr>
<p>Last updated on 2023-09-13 |

        <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/edit/main/episodes/04-create_net.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What is a neural network?”</li>
<li>“What are the characteristics of a dense layer?”</li>
<li>“What is an activation function?”</li>
<li>“What is a convolutional neural network?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>objectives: - “Become familiar with key components of a neural
network.” - “Create the architecture for a convolutational neural
network.”</p>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Dense layers, also known as fully connected layers, are an
important building block in most neural network architectures. In a
dense layer, each neuron is connected to every neuron in the preceeding
layer.”</li>
<li>“Dropout is a method that helps to prevent overfitting by
temporarily removing neurons from the network.”</li>
<li>“The Rectified Linear Unit (ReLU) is an activation function that
outputs an input if it is positive, and outputs zero if it is not.”</li>
<li>“Convolutional neural networks are typically used for imaging
tasks.”</li>
</ul>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-a-neural-network">What is a neural network?<a class="anchor" aria-label="anchor" href="#what-is-a-neural-network"></a>
</h2>
<hr class="half-width">
<p>An artificial neural network, or just “neural network”, is a broad
term that describes a family of machine learning models that are (very!)
loosely based on the neural circuits found in biology.</p>
<p>The smallest building block of a neural network is a single neuron. A
typical neuron receives inputs (x1, x2, x3) which are multiplied by
learnable weights (w1, w2, w3), then summed with a bias term (b). An
activation function (f) determines the neuron output.</p>
<figure><img src="../fig/neuron.png" alt="An example neuron receiving input from 3 other neurons" class="figure mx-auto d-block"></figure><p>From a high level, a neural network is a system that takes input
values in an “input layer”, processes these values with a collection of
functions in one or more “hidden layers”, and then generates an output
such as a prediction. The network has parameters that are systematically
tweaked to allow pattern recognition.</p>
<p><img src="../fig/simple_neural_network.png" class="figure">{a;t=“A simple neural
network with input, output, and 2 hidden layers”}</p>
<p>The layers shown in the network above are “dense” or “fully
connected”. Each neuron is connected to all neurons in the preceeding
layer. Dense layers are a common building block in neural network
architectures.</p>
<p>“Deep learning” is an increasingly popular term used to describe
certain types of neural network. When people talk about deep learning
they are typically referring to more complex network designs, often with
a large number of hidden layers.</p>
</section><section><h2 class="section-heading" id="activation-functions">Activation Functions<a class="anchor" aria-label="anchor" href="#activation-functions"></a>
</h2>
<hr class="half-width">
<p>Part of the concept of a neural network is that each neuron can
either be ‘active’ or ‘inactive’. This notion of activity and inactivity
is attempted to be replicated by so called activation functions. The
original activation function was the sigmoid function (related to its
use in logistic regression). This would make each neuron’s activation
some number between 0 and 1, with the idea that 0 was ‘inactive’ and 1
was ‘active’.</p>
<p>As time went on, different activation functions were used. For
example the tanh function (hyperbolic tangent function), where the idea
is a neuron can be active in both a positive capacity (close to 1), a
negative capacity (close to -1) or can be inactive (close to 0).</p>
<p>The problem with both of these is that they suffered from a problem
called <a href="http://vigir.missouri.edu/~gdesouza/Research/Conference_CDs/IEEE_SSCI_2015/data/7560b423.pdf" class="external-link">model
saturation</a>. This is where very high or very low values are put into
the activation function, where the gradient of the line is almost flat.
This leads to very slow learning rates (it can take a long time to train
models with these activation functions).</p>
<p>Another very popular activation function that tries to tackle this is
the rectified linear unit (ReLU) function. This has 0 if the input is
negative (inactive) and just gives back the input if it is positive (a
measure of how active it is - the metaphor gets rather stretched here).
This is much faster at training and gives very good performance, but
still suffers model saturation on the negative side. Researchers have
tried to get round this with functions like ‘leaky’ ReLU, where instead
of returning 0, negative inputs are multiplied by a very small
number.</p>
<figure><img src="../fig/ActivationFunctions.png" alt="Plots of the Sigmoid, Tanh, ReLU, and Leaky ReLU activation functions" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="convolutional-neural-networks">Convolutional neural networks<a class="anchor" aria-label="anchor" href="#convolutional-neural-networks"></a>
</h2>
<hr class="half-width">
<p>Convolutional neural networks (CNNs) are a type of neural network
that especially popular for vision tasks such as image recognition. CNNs
are very similar to ordinary neural networks, but they have
characteristics that make them well suited to image processing.</p>
<p>Just like other neural networks, a CNN typically consists of an input
layer, hidden layers and an output layer. The layers of “neurons” have
learnable weights and biases, just like other networks.</p>
<p>What makes CNNs special? The name stems from the fact that the
architecture includes one or more convolutional layers. These layers
apply a mathematical operation called a “convolution” to extract
features from arrays such as images.</p>
<p>In a convolutional layer, a matrix of values referred to as a
“filter” or “kernel” slides across the input matrix (in our case, an
image). As it slides, values are multiplied to generate a new set of
values referred to as a “feature map” or “activation map”.</p>
<figure><img src="../fig/convolution_plotke.gif" alt="2D Convolution Animation by Michael Plotke" class="figure mx-auto d-block"></figure><p>Filters provide a mechanism for emphasising aspects of an input
image. For example, a filter may emphasise object edges. See <a href="https://setosa.io/ev/image-kernels/" class="external-link">setosa.io</a> for a visual
demonstration of the effect of different filters.</p>
</section><section><h2 class="section-heading" id="creating-a-convolutional-neural-network">Creating a convolutional neural network<a class="anchor" aria-label="anchor" href="#creating-a-convolutional-neural-network"></a>
</h2>
<hr class="half-width">
<p>Before training a convolutional neural network, we will first need to
define the architecture. We can do this using the Keras and Tensorflow
libraries.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Create the architecture of our convolutional neural network, using</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># the tensorflow library</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="im">from</span> tensorflow.random <span class="im">import</span> set_seed</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="im">from</span> tensorflow.keras.layers <span class="im">import</span> Dense, Dropout, Conv2D, MaxPool2D, Input, GlobalAveragePooling2D</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="im">from</span> tensorflow.keras.models <span class="im">import</span> Model</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co"># set random seed for reproducibility</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>set_seed(<span class="dv">42</span>)</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a> </span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="co"># Our input layer should match the input shape of our images.</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co"># A CNN takes tensors of shape (image_height, image_width, color_channels)</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co"># We ignore the batch size when describing the input layer</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co"># Our input images are 256 by 256, plus a single colour channel.</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>inputs <span class="op">=</span> Input(shape<span class="op">=</span>(<span class="dv">256</span>, <span class="dv">256</span>, <span class="dv">1</span>))</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="co"># Let's add the first convolutional layer</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>x <span class="op">=</span> Conv2D(filters<span class="op">=</span><span class="dv">8</span>, kernel_size<span class="op">=</span><span class="dv">3</span>, padding<span class="op">=</span><span class="st">'same'</span>, activation<span class="op">=</span><span class="st">'relu'</span>)(inputs)</span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="co"># MaxPool layers are similar to convolution layers. </span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="co"># The pooling operation involves sliding a two-dimensional filter over each channel of feature map and selecting the max values.</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="co"># We do this to reduce the dimensions of the feature maps, helping to limit the amount of computation done by the network.</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a>x <span class="op">=</span> MaxPool2D()(x)</span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="co"># We will add more convolutional layers, followed by MaxPool</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a>x <span class="op">=</span> Conv2D(filters<span class="op">=</span><span class="dv">8</span>, kernel_size<span class="op">=</span><span class="dv">3</span>, padding<span class="op">=</span><span class="st">'same'</span>, activation<span class="op">=</span><span class="st">'relu'</span>)(x)</span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a>x <span class="op">=</span> MaxPool2D()(x)</span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a>x <span class="op">=</span> Conv2D(filters<span class="op">=</span><span class="dv">12</span>, kernel_size<span class="op">=</span><span class="dv">3</span>, padding<span class="op">=</span><span class="st">'same'</span>, activation<span class="op">=</span><span class="st">'relu'</span>)(x)</span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a>x <span class="op">=</span> MaxPool2D()(x)</span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a>x <span class="op">=</span> Conv2D(filters<span class="op">=</span><span class="dv">12</span>, kernel_size<span class="op">=</span><span class="dv">3</span>, padding<span class="op">=</span><span class="st">'same'</span>, activation<span class="op">=</span><span class="st">'relu'</span>)(x)</span>
<span id="cb1-30"><a href="#cb1-30" tabindex="-1"></a>x <span class="op">=</span> MaxPool2D()(x)</span>
<span id="cb1-31"><a href="#cb1-31" tabindex="-1"></a>x <span class="op">=</span> Conv2D(filters<span class="op">=</span><span class="dv">20</span>, kernel_size<span class="op">=</span><span class="dv">5</span>, padding<span class="op">=</span><span class="st">'same'</span>, activation<span class="op">=</span><span class="st">'relu'</span>)(x)</span>
<span id="cb1-32"><a href="#cb1-32" tabindex="-1"></a>x <span class="op">=</span> MaxPool2D()(x)</span>
<span id="cb1-33"><a href="#cb1-33" tabindex="-1"></a>x <span class="op">=</span> Conv2D(filters<span class="op">=</span><span class="dv">20</span>, kernel_size<span class="op">=</span><span class="dv">5</span>, padding<span class="op">=</span><span class="st">'same'</span>, activation<span class="op">=</span><span class="st">'relu'</span>)(x)</span>
<span id="cb1-34"><a href="#cb1-34" tabindex="-1"></a>x <span class="op">=</span> MaxPool2D()(x)</span>
<span id="cb1-35"><a href="#cb1-35" tabindex="-1"></a>x <span class="op">=</span> Conv2D(filters<span class="op">=</span><span class="dv">50</span>, kernel_size<span class="op">=</span><span class="dv">5</span>, padding<span class="op">=</span><span class="st">'same'</span>, activation<span class="op">=</span><span class="st">'relu'</span>)(x)</span>
<span id="cb1-36"><a href="#cb1-36" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" tabindex="-1"></a><span class="co"># Global max pooling reduces dimensions back to the input size</span></span>
<span id="cb1-38"><a href="#cb1-38" tabindex="-1"></a>x <span class="op">=</span> GlobalAveragePooling2D()(x)</span>
<span id="cb1-39"><a href="#cb1-39" tabindex="-1"></a></span>
<span id="cb1-40"><a href="#cb1-40" tabindex="-1"></a><span class="co"># Finally we will add two "dense" or "fully connected layers".</span></span>
<span id="cb1-41"><a href="#cb1-41" tabindex="-1"></a><span class="co"># Dense layers help with the classification task, after features are extracted.</span></span>
<span id="cb1-42"><a href="#cb1-42" tabindex="-1"></a>x <span class="op">=</span> Dense(<span class="dv">128</span>, activation<span class="op">=</span><span class="st">'relu'</span>)(x)</span>
<span id="cb1-43"><a href="#cb1-43" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" tabindex="-1"></a><span class="co"># Dropout is a technique to help prevent overfitting that involves deleting neurons.</span></span>
<span id="cb1-45"><a href="#cb1-45" tabindex="-1"></a>x <span class="op">=</span> Dropout(<span class="fl">0.6</span>)(x)</span>
<span id="cb1-46"><a href="#cb1-46" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" tabindex="-1"></a>x <span class="op">=</span> Dense(<span class="dv">32</span>, activation<span class="op">=</span><span class="st">'relu'</span>)(x)</span>
<span id="cb1-48"><a href="#cb1-48" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" tabindex="-1"></a><span class="co"># Our final dense layer has a single output to match the output classes.</span></span>
<span id="cb1-50"><a href="#cb1-50" tabindex="-1"></a><span class="co"># If we had multi-classes we would match this number to the number of classes.</span></span>
<span id="cb1-51"><a href="#cb1-51" tabindex="-1"></a>outputs <span class="op">=</span> Dense(<span class="dv">1</span>, activation<span class="op">=</span><span class="st">'sigmoid'</span>)(x)</span>
<span id="cb1-52"><a href="#cb1-52" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" tabindex="-1"></a><span class="co"># Finally, we will define our network with the input and output of the network</span></span>
<span id="cb1-54"><a href="#cb1-54" tabindex="-1"></a>model <span class="op">=</span> Model(inputs<span class="op">=</span>inputs, outputs<span class="op">=</span>outputs)</span></code></pre>
</div>
<p>We can view the architecture of the model:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>model.summary()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Model: "model_39"
_________________________________________________________________
 Layer (type)                Output Shape              Param #
=================================================================
 input_9 (InputLayer)        [(None, 256, 256, 1)]     0

 conv2d_59 (Conv2D)          (None, 256, 256, 8)       80

 max_pooling2d_50 (MaxPoolin  (None, 128, 128, 8)      0
 g2D)

 conv2d_60 (Conv2D)          (None, 128, 128, 8)       584

 max_pooling2d_51 (MaxPoolin  (None, 64, 64, 8)        0
 g2D)

 conv2d_61 (Conv2D)          (None, 64, 64, 12)        876

 max_pooling2d_52 (MaxPoolin  (None, 32, 32, 12)       0
 g2D)

 conv2d_62 (Conv2D)          (None, 32, 32, 12)        1308

 max_pooling2d_53 (MaxPoolin  (None, 16, 16, 12)       0
 g2D)

 conv2d_63 (Conv2D)          (None, 16, 16, 20)        6020

 max_pooling2d_54 (MaxPoolin  (None, 8, 8, 20)         0
 g2D)

 conv2d_64 (Conv2D)          (None, 8, 8, 20)          10020

 max_pooling2d_55 (MaxPoolin  (None, 4, 4, 20)         0
 g2D)

 conv2d_65 (Conv2D)          (None, 4, 4, 50)          25050

 global_average_pooling2d_8   (None, 50)               0
 (GlobalAveragePooling2D)

 dense_26 (Dense)            (None, 128)               6528

 dropout_8 (Dropout)         (None, 128)               0

 dense_27 (Dense)            (None, 32)                4128

 dense_28 (Dense)            (None, 1)                 33

=================================================================
Total params: 54,627
Trainable params: 54,627
Non-trainable params: 0
_________________________________________________________________</code></pre>
</div>
</section><section><h2 class="section-heading" id="matlab">MATLAB<a class="anchor" aria-label="anchor" href="#matlab"></a>
</h2>
<hr class="half-width"></section><section><h2 class="section-heading" id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h2>
<hr class="half-width">
<p>The mathematician Richard Hamming once said, “The purpose of
computing is insight, not numbers,” and the best way to develop insight
is often to visualize data. Visualization deserves an entire lecture (or
course) of its own, but we can explore a few features of MATLAB
here.</p>
<p>We will start by exploring the function <code>plot</code>. The most
common usage is to provide two vectors, like <code>plot(X,Y)</code>.
Lets start by plotting the the average (accross patients) inflammation
over time. For the <code>Y</code> vector we can provide
<code>per_day_mean</code>, and for the <code>X</code> vector we can
simply use the day number, which we can generate as a range with
<code>1:40</code>. Then our plot can be generated with:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">40</span><span class="op">,</span><span class="va">per_day_mean</span>)</span></code></pre>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note:</strong> If we only provide a vector as an argument it
plots a data-point for each value on the y axis, and it uses the index
of each element as the x axis. For our patient data the indices coincide
with the day of the study, so <code>plot(per_day_mean)</code> generates
the same plot. In most cases, however, using the indices on the x axis
is not desireable.</p>
</div>
</div>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note:</strong> We do not even need to have the vactor saved
as a variable. We would obtain the same plot with the command
<code>plot(mean(patient_data, 1))</code>.</p>
</div>
</div>
</div>
<p>As it is, the image is not very informative. We need to give the
figure a <code>title</code> and label the axes using <code>xlabel</code>
and <code>ylabel</code>, so that other people can understand what it
shows (including us if we return to this plot 6 months from now).</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span></code></pre>
</div>
<figure><img src="../fig/average-inflammation.png" alt="Average inflammation" class="figure mx-auto d-block"></figure><p>Much better, now the image actually communicates something.</p>
<p>The result is roughly a linear rise and fall, which is suspicious:
based on other studies, we expect a sharper rise and slower fall. Let’s
have a look at two other statistics: the maximum and minimum
inflammation per day across all patients.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">per_day_max</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Maximum inflammation per day'</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span></code></pre>
</div>
<figure><img src="../fig/max-inflammation.png" alt="Maximum inflammation" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">per_day_min</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Minimum inflammation per day'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span></code></pre>
</div>
<figure><img src="../fig/min-inflammation.png" alt="Minumum inflammation" class="figure mx-auto d-block"></figure><p>From the figures, we see that the maximum value rises and falls
perfectly smoothly, while the minimum seems to be a step function.
Neither result seems particularly likely, so either there’s a mistake in
our calculations or something is wrong with our data.</p>
</section><section><h2 class="section-heading" id="multiple-lines-in-a-plot">Multiple lines in a plot<a class="anchor" aria-label="anchor" href="#multiple-lines-in-a-plot"></a>
</h2>
<hr class="half-width">
<p>It is often the case that we want more than one line in a single
plot. In matlab we can “hold” a plot and keep plotting on top. For
example, we might want to contrast the mean values accross patients with
the information of a single patient. If we are displaying more than one
line, it is important we add a legend. We can specify the legend names
by adding <code>,'DisplayName',"legend name here"</code> inside the plot
function. We then need to activate the legend by running
<code>legend</code> So, to plot the mean values we first do:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">per_day_mean</span><span class="op">,</span><span class="ss">'DisplayName'</span><span class="op">,</span><span class="st">"Mean"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">legend</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span></code></pre>
</div>
<figure><img src="../fig/average_inflammation_with_legend.png" alt="Average inflamation with legend" class="figure mx-auto d-block"></figure><p>Then, we can use the instruction <code>hold on</code> to add a plot
for patient_5.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">hold</span> <span class="va">on</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">patient_5</span><span class="op">,</span><span class="ss">'DisplayName'</span><span class="op">,</span><span class="st">"Patient 5"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">hold</span> <span class="va">off</span></span></code></pre>
</div>
<figure><img src="../fig/average_inflammation_and_patient_5_with_legend.png" alt="Average inflamation and Patient 5" class="figure mx-auto d-block"></figure><p>Remember to tell matlab you are done by adding <code>hold off</code>
when you are done!</p>
</section><section><h2 class="section-heading" id="subplots">Subplots<a class="anchor" aria-label="anchor" href="#subplots"></a>
</h2>
<hr class="half-width">
<p>It is often convenient to combine multiple plots into one figure. The
<code>subplot(m,n,p)</code>command allows us to do just that. The first
two parameter define a grid of <code>m</code> rows and <code>n</code>
columns, in which our plots will be placed. The third parameter
indicates the position on the grid that we want to use for the “next”
plot command. For example, we can show the average daily min and max
plots together with:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">per_day_max</span>)</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'max'</span>)</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'day'</span>)</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">per_day_min</span>)</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'min'</span>)</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'day'</span>)</span></code></pre>
</div>
<figure><img src="../fig/max-min-subplot.png" alt="Max Min subplot" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="heatmaps">Heatmaps<a class="anchor" aria-label="anchor" href="#heatmaps"></a>
</h2>
<hr class="half-width">
<p>If we wanted to look at all our data at the same time we need a three
dimensions: One for the patients, one for the days, and another one for
the inflamation values. An option is to use a heatmap, that is, use the
colour of each point to represent the inflamation values.</p>
<p>In matlab, at least two methods can do this for us. The <a href="https://uk.mathworks.com/help/matlab/ref/heatmap.html" class="external-link"><code>heatmap</code>
function</a> takes a table as input and produces a heatmap:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">heatmap</span>(<span class="va">patient_data</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Patient number'</span>)</span></code></pre>
</div>
<figure><img src="../fig/heatmap.png" alt="Heat map" class="figure mx-auto d-block"></figure><p>We gain something by visualizing the whole dataset at once, but it is
harder to distinwish the overly linear rises and fall over a 40 day
period.</p>
<p>Similarly, the <a href="https://uk.mathworks.com/help/matlab/ref/imagesc.html" class="external-link"><code>imagesc</code>
function</a> represents the matrix as a color image.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">imagesc</span>(<span class="va">patient_data</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Patient number'</span>)</span></code></pre>
</div>
<figure><img src="../fig/inflammation-heatmap.png" alt="imagesc Heat map" class="figure mx-auto d-block"></figure><p>Every value in the matrix is <em>mapped</em> to a color. Blue regions
in this heat map are low values, while yellow shows high values.</p>
<p>Both functions provide very similar information, and can be tweaked
to your liking. The <code>imagesc</code> function is usually only used
for purely numerical arrays, whereas <code>heatmap</code> can process <a href="https://uk.mathworks.com/help/matlab/ref/table.html" class="external-link">tables</a>
(that can have strings or categories in them). In our case, which one
you use is a matter of taste.</p>
<div class="section level3">
<h3 id="is-all-our-data-corrupt">Is all our data corrupt?<a class="anchor" aria-label="anchor" href="#is-all-our-data-corrupt"></a>
</h3>
<p>Our work so far has convinced us that something is wrong with our
first data file. We would like to check the other 11 the same way, but
typing in the same commands repeatedly is tedious and error-prone. Since
computers don’t get bored (that we know of), we should create a way to
do a complete analysis with a single command, and then figure out how to
repeat that step once for each file. These operations are the subjects
of the next two lessons.</p>
</div>
</section></section><section id="aio-05-scripts"><p>Content from <a href="05-scripts.html">Writing MATLAB Scripts</a></p>
<hr>
<p>Last updated on 2023-08-21 |

        <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/edit/main/episodes/05-scripts.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 35 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How can I save and re-use my programs?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Write and save MATLAB scripts.”</li>
<li>“Save MATLAB plots to disk.”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>So far, we’ve typed in commands one-by-one on the command line to get
MATLAB to do things for us. But what if we want to repeat our analysis?
Sure, it’s only a handful of commands, and typing them in shouldn’t take
us more than a few minutes. But if we forget a step or make a mistake,
we’ll waste time rewriting commands. Also, we’ll quickly find ourselves
doing more complex analyses, and we’ll need our results to be more
easily reproducible.</p>
<p>In addition to running MATLAB commands one-by-one on the command
line, we can also write several commands in a <em>script</em>. A MATLAB
script is just a text file with a <code>.m</code> extension. We’ve
written commands to load data from a <code>.csv</code> file, compute
statistics of the data and display some plots about that data. Let’s put
those commands in a script called <code>patient_analysis.m</code>, which
we’ll save in the <code>src</code> directory in our current
folder,<code>matlab-novice-inflammation</code>.</p>
<p>To create a new script we can click the “New script” button on the
top left, or use the command:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="va">edit</span> <span class="va">src</span><span class="op">/</span><span class="va">patient_analysis</span>.<span class="va">m</span></span></code></pre>
</div>
<p>Matlab will create a file called <code>patient_analysis.m</code> in
the <code>src</code> folder. It is important that we let matlab know
that we want it to find stuff in this folder. To do this, right click on
the folder icon in the file browser and select “Add to Path”.</p>
<div id="the-matlab-path" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-matlab-path" class="callout-inner">
<h3 class="callout-title">The MATLAB path</h3>
<div class="callout-content">
<p>MATLAB knows about files in the current directory, but if we want to
run a script saved in a different location, we need to make sure that
this file is visible to MATLAB. We do this by adding directories to the
MATLAB <strong>path</strong>. The <em>path</em> is a list of directories
MATLAB will search through to locate files.</p>
<p>To add a directory to the MATLAB path, we go to the <code>Home</code>
tab, click on <code>Set Path</code>, and then on
<code>Add with Subfolders...</code>. We navigate to the directory and
add it to the path to tell MATLAB where to look for our files. When you
refer to a file (either code or data), MATLAB will search all the
directories in the path to find it. Alternatively, for data files, we
can provide the relative or absolute file path.</p>
</div>
</div>
</div>
<div id="gnu-octave" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="gnu-octave" class="callout-inner">
<h3 class="callout-title">GNU Octave</h3>
<div class="callout-content">
<p>Octave has only recently gained a MATLAB-like user interface. To
change the path in any version of Octave, including command-line-only
installations, use <code>addpath('path/to/directory')</code></p>
</div>
</div>
</div>
<p>We can now type the contents of the script:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">% Compute global statistics</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="va">g_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="va">g_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="va">g_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">% Compute patient statistics</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="va">p_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="fl">5</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="va">p_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="fl">5</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="va">p_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="fl">5</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">% Compare patient vs global</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'Patient 5:'</span>)</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'High mean?'</span>)</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_mean</span> <span class="op">&gt;</span> <span class="va">g_mean</span>)</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'Highest max?'</span>)</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_max</span> <span class="op">==</span> <span class="va">g_max</span>)</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'Lowest min?'</span>)</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_min</span> <span class="op">==</span> <span class="va">g_min</span>)</span></code></pre>
</div>
<p>Now, before running this script lets clear our workplace so that we
can see what is happening.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clear</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clc</span></span></code></pre>
</div>
<p>If you now run the script by clicking “Run” on the graphical user
interface, pressing <code>F5</code> on the keyboard, or typing the
script’s name <code>patient_analysis</code> on the command line (without
extention), you’ll see a bunch of variables appear on the workspace and
this output:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="va">patient_analysis</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient 5:
High mean?
   0
Highest max?
   0
Lowest min?
   1</code></pre>
</div>
<p>Remember, we supressed most outputs with <code>;</code>, so the only
lines printed are the ones with <code>disp</code>.</p>
<p>As you can see, the script ran every line of code in the script in
order, and created any variable we asked for. Having the code in the
script makes it much easier to follow what we are doing, and also make
changes. For example, if we now want to look at patient 8, all we need
to do is change the number in lines 10, 11 and 12. We can actually do a
bit better, and replace that number for a variable
<code>patient_number</code>. This variable needs to exist before it is
used, so lets insert it before computing the patient statistics, like
so:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">% Compute global statistics</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="va">g_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="va">g_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="va">g_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="va">patient_number</span> <span class="op">=</span> <span class="fl">8</span><span class="op">;</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">% Compute patient statistics</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="va">p_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="va">p_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="va">p_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">% Compare patient vs global</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'Patient:'</span>)</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="va">disp</span>(<span class="va">patient_number</span>)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'High mean?'</span>)</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_mean</span> <span class="op">&gt;</span> <span class="va">g_mean</span>)</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'Highest max?'</span>)</span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_max</span> <span class="op">==</span> <span class="va">g_max</span>)</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'Lowest min?'</span>)</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_min</span> <span class="op">==</span> <span class="va">g_min</span>)</span></code></pre>
</div>
<p>Note that we also changed the disp commands to show the right patient
number.</p>
<p>Getting the results for whichever patient is now as simple as
changing the value of <code>patient_number</code>.</p>
<p>For the case of patient 8, we get:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="va">patient_analysis</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient 8:
High mean?
   1
Highest max?
   1
Lowest min?
   1</code></pre>
</div>
<div id="help-text" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="help-text" class="callout-inner">
<h3 class="callout-title">Help text</h3>
<div class="callout-content">
<p>You might have noticed that we described what we want our code to do
using the percent sign: <code>%</code>. This is another plus of writing
scripts: you can comment your code to make it easier to understand when
you come back to it after a while.</p>
<p>A comment can appear on any line, but be aware that the first line or
block of comments in a script or function is used by MATLAB as the
<strong>help text</strong>. When we use the <code>help</code> command,
MATLAB returns the <em>help text</em>. The first help text line (known
as the <strong>H1 line</strong>) typically includes the name of the
program, and a brief description. The <code>help</code> command works in
just the same way for our own programs as for built-in MATLAB functions.
You should write help text for all of your own scripts and
functions.</p>
</div>
</div>
</div>
<p>Let’s write an H1 line at the top of our script:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co">% PATIENT_ANALYSIS   Computes mean, max and min of a patient and compares to global statistics.</span></span></code></pre>
</div>
<p>We can then get help for our script by running</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="va">help</span> <span class="va">patient_analysis</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  patient_analysis   Computes mean, max and min of a patient and compares to global statistics.</code></pre>
</div>
<section><h2 class="section-heading" id="script-for-plotting">Script for plotting<a class="anchor" aria-label="anchor" href="#script-for-plotting"></a>
</h2>
<hr class="half-width">
<p>Of course, our scripts can be as complicated as we like. There were a
lot of commands involved with plotting, so lets try and put that in a
script.</p>
<p>Create a new script in the current directory called
<code>plot_daily_average.m</code></p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="va">edit</span> <span class="va">src</span><span class="op">/</span><span class="va">plot_daily_average</span>.<span class="va">m</span></span></code></pre>
</div>
<p>In the script, lets recap what we need to do:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co">% PLOT_DAILY_AVERAGE   Plots daily average inflammation accross patients.</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="va">figure</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">% Plot average inflammation per day</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span></code></pre>
</div>
<p>Note that we are explicitly creating a new figure window using the
<code>figure</code> command.</p>
<p>Try this on the command line:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="va">figure</span></span></code></pre>
</div>
<p>MATLAB’s plotting commands only create a new figure window if one
doesn’t already exist: the default behaviour is to reuse the current
figure window as we saw in the previous episode. Explicitly creating a
new figure window in the script avoids any unexpected results from
plotting on top of existing figures.</p>
<p>Now lets run the script:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="va">plot_daily_average</span></span></code></pre>
</div>
<p>You should see the figure appear.</p>
<p>Let’s modify our <code>plot_daily_average</code> script so that it
creates sub-plots, rather than individual plots.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co">% PLOT_DAILY_AVERAGE   Plots daily average, max and min inflammation accross patients.</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="va">figure</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="co">% Plot average inflammation per day</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a><span class="co">% Plot max inflammation per day</span></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a><span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a></span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a><span class="co">% Plot min inflammation per day</span></span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">3</span>)</span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a><span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span></code></pre>
</div>
<p>The script now allows us to create all 3 plots with a single command:
<code>plot_daily_average</code>.</p>
<p>We can ask matlab to save the image too using the <code>print</code>
command. In order to maintain an organised project we’ll save the images
in the <code>results</code> directory:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co">% Save plot in 'results' folder as png image:</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="va">print</span>(<span class="ss">'results/daily_average_01'</span><span class="op">,</span><span class="ss">'-dpng'</span>)</span></code></pre>
</div>
<div id="callout4" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note:</strong></p>
<p>If you have a printer configured on your computer the
<code>print</code> command may send it to the printer. You can instead
use <code>saveas</code>, which requiere two arguments: a figure and a
filename. You can get the current figure with <code>gcf</code>, and
specify the filename with an extension, like so:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co">% Save plot in 'results' folder as png image:</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="va">saveas</span>(<span class="va">gcf</span><span class="op">,</span><span class="ss">'results/daily_average_01.png'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
<p>When saving plots to disk, it’s sometimes useful to turn off their
visibility as MATLAB plots them. For example, we might not want to view
(or spend time closing) the figures in MATLAB, and not displaying the
figures could make the script run faster.</p>
<p>Let’s add a couple of lines of code to do this.</p>
<p>We can ask MATLAB to create an empty figure window without displaying
it by setting its <code>'visible'</code> property to <code>'off'</code>,
like so:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span></code></pre>
</div>
<p>When we do this, we have to be careful to manually “close” the figure
after we are doing plotting on it - the same as we would “close” an
actual figure window if it were open:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="va">close</span>()</span></code></pre>
</div>
<p>Adding these two lines, our finished script looks like this:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co">% PLOT_DAILY_AVERAGE   Saves plot of daily average, max and min inflammation accross patients.</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="co">% Plot average inflammation per day</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a><span class="co">% Plot max inflammation per day</span></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a><span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a><span class="co">% Plot min inflammation per day</span></span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">3</span>)</span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a><span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb21-28"><a href="#cb21-28" tabindex="-1"></a></span>
<span id="cb21-29"><a href="#cb21-29" tabindex="-1"></a></span>
<span id="cb21-30"><a href="#cb21-30" tabindex="-1"></a><span class="co">% Save plot in 'results' folder as png image:</span></span>
<span id="cb21-31"><a href="#cb21-31" tabindex="-1"></a><span class="va">saveas</span>(<span class="va">gcf</span><span class="op">,</span><span class="ss">'results/daily_average_01.png'</span>)</span>
<span id="cb21-32"><a href="#cb21-32" tabindex="-1"></a></span>
<span id="cb21-33"><a href="#cb21-33" tabindex="-1"></a><span class="va">close</span>()</span></code></pre>
</div>
<p>The scripts we’ve written make regenerating plots easier, and looking
at individual patient’s data much simpler, but we still need to open the
script, change the patient number, save, and run. In contrast, when we
have used <em>functions</em> we can <em>provide</em> arguments, which
are then used to do something. So, can we create our own
<em>functions</em>?</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Save MATLAB code in files with a <code>.m</code> suffix.”</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-06-func"><p>Content from <a href="06-func.html">Creating Functions</a></p>
<hr>
<p>Last updated on 2023-08-21 |

        <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/edit/main/episodes/06-func.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 65 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How can I teach MATLAB how to do new things?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Compare and contrast MATLAB function files with MATLAB
scripts.”</li>
<li>“Define a function that takes arguments.”</li>
<li>“Test a function.”</li>
<li>“Recognize why we should divide programs into small, single-purpose
functions.”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the <code>patient_analysis</code> script we created, we can choose
which patient to analyse by modifying the variable
<code>patient_number</code>. If we want patient 13, we need to open
<code>patient_analysis.m</code>, go to line 9, modify the variable, save
and then run <code>patient_analysis</code>. This is a lot of steps for
such a simple request.</p>
<p>We have used a few predefined Matlab functions, to which we can
provide arguments. So how can we define a function in Matlab?</p>
<p>A MATLAB function <em>must</em> be saved in a text file with a
<code>.m</code> extension. The name of that file must be the same as the
function defined inside it. The name must start with a letter and cannot
contain spaces.</p>
<p>The first line of our function is called the <em>function
definition</em>. Anything following the function definition line is
called the <em>body</em> of the function. The keyword <code>end</code>
marks the end of the function body, and the function won’t know about
any code after <code>end</code>.</p>
<p>A function can have multiple input and output parameters if required,
but isn’t required to have any of either. The general form of a function
is shown in the pseudo-code below:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">function</span> [<span class="va">out1</span><span class="op">,</span> <span class="va">out2</span>] <span class="op">=</span> <span class="va">function_name</span>(<span class="va">in1</span><span class="op">,</span> <span class="va">in2</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    <span class="co">% FUNCTION_NAME   Function description</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>    <span class="co">%    Can add more text for the function help</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="co">%    An example is always useful!</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="co">% This section below is called the body of the function</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    <span class="va">out1</span> <span class="op">=</span> <span class="va">something</span> <span class="va">calculated</span><span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>    <span class="va">out2</span> <span class="op">=</span> <span class="va">something</span> <span class="kw">else</span><span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Just as we saw with scripts, functions must be <em>visible</em> to
MATLAB, i.e., a file containing a function has to be placed in a
directory that MATLAB knows about. The most convenient of those
directories is the current working directory.</p>
<div id="gnu-octave" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="gnu-octave" class="callout-inner">
<h3 class="callout-title">GNU Octave</h3>
<div class="callout-content">
<p>In common with MATLAB, Octave searches the current working directory
and the path for functions called from the command line.</p>
</div>
</div>
</div>
<p>We already have a <code>.m</code> file called
<code>patient_analysis</code>, so lets define a function with that
name.</p>
<p>Open the <code>patient_analysis.m</code> file, if you don’t already
have it open. Instead of line 9, where <code>patient_number</code> is
set, we want to provide that variable as an input. So lets remove that
line, and right at the top of our script we’ll add the function
definition telling matlab what our function is called and what inputs it
needs.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">patient_analysis</span>(<span class="va">patient_number</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    <span class="co">% PATIENT_ANALYSIS   Computes mean, max and min of a patient and compares to global statistics.</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>    <span class="co">%    Takes the patient number as an input, and prints the relevant information to console.</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    <span class="co">%    Sample usage:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="co">%       patient_analysis(5)</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>    <span class="co">% Load patient data</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>    <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>    <span class="co">% Compute global statistics</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>    <span class="va">g_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>    <span class="va">g_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    <span class="va">g_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>    <span class="co">% Compute patient statistics</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>    <span class="va">p_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>    <span class="va">p_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>    <span class="va">p_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>    <span class="co">% Compare patient vs global</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'Patient:'</span>)</span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">patient_number</span>)</span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'High mean?'</span>)</span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">p_mean</span> <span class="op">&gt;</span> <span class="va">g_mean</span>)</span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'Highest max?'</span>)</span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">p_max</span> <span class="op">==</span> <span class="va">g_max</span>)</span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'Lowest min?'</span>)</span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">p_min</span> <span class="op">==</span> <span class="va">g_min</span>)</span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Congratulations! You’ve now created a Matlab function.</p>
<p>You may have noticed that the code inside the function is indented.
Matlab does not need this, but it makes it much more readable!</p>
<p>Lets clear our workspace and run our function in the command
line:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clear</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clc</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_analysis</span>(<span class="fl">13</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient 5:
High mean?
   1
Highest max?
   0
Lowest min?
   1</code></pre>
</div>
<p>So now we can get the patient analysis of whichever patient we want,
and we do not need to modify <code>patient_analysis.m</code> anymore.
However, you may have noticed that we have no variables in our
workspace. Inside the function, the variables <code>patient_data</code>,
<code>g_mean</code>, <code>g_max</code>, <code>g_min</code>,
<code>p_mean</code>, <code>p_max</code>, and <code>p_min</code> are
created, but then they are deleted when the function ends.</p>
<p>This is one of the major differences between scripts and functions: a
script can be thought of as automating the command line, with full
access to all variables in the base workspace, whereas a function has
its own separate workspace.</p>
<p>To be able to access variables from your workspace, you have to pass
them in as inputs. To be able to save variables to your workspace, it
needs to return them as outputs.</p>
<p>Lets say, for example, that we want to save the mean of each patient.
In our <code>patient_analysis.m</code> we already compute the value and
save it in <code>p_mean</code>, but we need to tell matlab that we want
the function to return it.</p>
<p>To do that we modify the function definition like this:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">p_mean</span> <span class="op">=</span> <span class="va">patient_analysis</span>(<span class="va">patient_number</span>)</span></code></pre>
</div>
<p>It is important that the variable name is the same that is used
inside the function.</p>
<p>If we now run our function in the command line, we get:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="va">p13</span> <span class="op">=</span> <span class="va">patient_analysis</span>(<span class="fl">13</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient 5:
High mean?
   1
Highest max?
   0
Lowest min?
   1

p13 =
    6.2250</code></pre>
</div>
<p>We could return more outputs if we want. For example, lets return the
min and max as well. To do that, we need to specify all the outputs in
square brackets, as an array. So we need to replace the function
definition for:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">function</span> [<span class="va">p_mean</span><span class="op">,</span><span class="va">p_max</span><span class="op">,</span><span class="va">p_min</span>] <span class="op">=</span> <span class="va">patient_analysis</span>(<span class="va">patient_number</span>)</span></code></pre>
</div>
<p>To call our function now we need to provide space for all 3 outputs,
so in the command line, we run it as:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>[<span class="va">p13_mean</span><span class="op">,</span><span class="va">p13_max</span><span class="op">,</span><span class="va">p13_min</span>] <span class="op">=</span> <span class="va">patient_analysis</span>(<span class="fl">13</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient 5:
High mean?
   1
Highest max?
   0
Lowest min?
   1
p13_mean =
    6.2250
p13_max =
    17
p13_min =
     0</code></pre>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note</strong> If you had not provided space for all the
outputs, Matlab assumes you are only interested in the first one, so
<code>ans</code> would save the mean.</p>
</div>
</div>
</div>
<div id="plotting-daily-average-of-different-data-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plotting-daily-average-of-different-data-files" class="callout-inner">
<h3 class="callout-title">Plotting daily average of different data files</h3>
<div class="callout-content">
<p>Look back at the <code>plot_daily_average</code> script. The data and
resulting image file names are hard-coded in the script. We actually
have 12 datafiles. Turn the script into a function that lets you
generate the plots for any of the files.</p>
<p>The function should operate on a single data file, and should have
two parameters: <code>data_file</code> and <code>plot_file</code>. When
called, the function should create the three graphs, and save the plot
as <code>plot_file</code>.</p>
<p>You should mostly be reusing code from the <code>plot_all</code>
script.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">plot_daily_average</span>(<span class="va">data_file</span><span class="op">,</span><span class="va">plot_name</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>    <span class="co">%PLOT_DAILY_AVERAGE   Plots daily average, max and min inflammation accross patients.</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>    <span class="co">%   The function takes the data in data_file and saves it as plot_name</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>    <span class="co">%   Example usage:</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>    <span class="co">%       plot_daily_average('data/inflammation-03.csv','results/plot3.png')</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>    <span class="co">% Load patient data</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>    <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="va">data_file</span>)<span class="op">;</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>    <span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>    <span class="co">% Plot average inflammation per day</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a>    <span class="co">% Plot max inflammation per day</span></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" tabindex="-1"></a>    <span class="co">% Plot min inflammation per day</span></span>
<span id="cb11-27"><a href="#cb11-27" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">3</span>)</span>
<span id="cb11-28"><a href="#cb11-28" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb11-29"><a href="#cb11-29" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb11-30"><a href="#cb11-30" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb11-31"><a href="#cb11-31" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb11-32"><a href="#cb11-32" tabindex="-1"></a></span>
<span id="cb11-33"><a href="#cb11-33" tabindex="-1"></a>    <span class="co">% Save plot in 'results' folder as png image:</span></span>
<span id="cb11-34"><a href="#cb11-34" tabindex="-1"></a>    <span class="va">saveas</span>(<span class="va">gcf</span><span class="op">,</span><span class="va">plot_name</span>)</span>
<span id="cb11-35"><a href="#cb11-35" tabindex="-1"></a></span>
<span id="cb11-36"><a href="#cb11-36" tabindex="-1"></a>    <span class="va">close</span>()</span>
<span id="cb11-37"><a href="#cb11-37" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="plotting-patient-vs-mean" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plotting-patient-vs-mean" class="callout-inner">
<h3 class="callout-title">Plotting patient vs mean</h3>
<div class="callout-content">
<p>Create a function called <code>patient_vs_mean</code> that generates
a plot like this one:</p>
<figure><img src="../fig/Subject_5.png" alt="Plotting patient vs mean" class="figure mx-auto d-block"></figure><p>The function should have the following inputs:</p>
<ul>
<li><p><code>per_day_mean</code> - A 1D array with the average
inflamation per day already loaded (you’ll have to load the data and
compute per_day_mean before calling the function).</p></li>
<li><p><code>pataient_data</code> - A 1D array with the data for the
patient of interest only.</p></li>
<li><p><code>patient_reference</code> - A string that will be used to
identify the patient on the plot, and also as a file name (you should
add the extension <code>png</code> in your function).</p></li>
</ul>
<p>When called, the function should create and save the plot as
<code>patient_reference</code>.png in the results folder.</p>
<p>Look back at the previous lessons if you need to!</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">patient_vs_mean</span>(<span class="va">per_day_mean</span><span class="op">,</span><span class="va">pataient_data</span><span class="op">,</span><span class="va">patient_reference</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>    <span class="co">% PATIENT_VS_MEAN   Plots the global mean and patient inflamation on top of each other.</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>    <span class="co">%   per_day_mean should be a vector with the global mean.</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    <span class="co">%   pataient_data should be a vector with only the patient data.</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    <span class="co">%   patient_reference will be used to identify the patient on the plot.</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    <span class="co">%</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>    <span class="co">%   Sample usage:</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>    <span class="co">%       patient_data = readmatrix('data/inflammation-01.csv');</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>    <span class="co">%       per_day_mean = mean(patient_data);</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>    <span class="co">%       patient_vs_mean(per_day_mean,patient_data(5,:),"Subject 5")</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a>    <span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a>    <span class="co">%Plot per_day_mean</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">per_day_mean</span><span class="op">,</span><span class="ss">'DisplayName'</span><span class="op">,</span><span class="st">"Mean"</span>)</span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a>    <span class="va">legend</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a>    <span class="co">%Overlap patient data</span></span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a>    <span class="va">hold</span> <span class="va">on</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">pataient_data</span><span class="op">,</span><span class="ss">'DisplayName'</span><span class="op">,</span><span class="va">patient_reference</span>)</span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a>    <span class="va">hold</span> <span class="va">off</span></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a></span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a>    <span class="co">% Save plot</span></span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a>    <span class="va">saveas</span>(<span class="va">gcf</span><span class="op">,</span><span class="st">"results/"</span><span class="op">+</span><span class="va">patient_reference</span><span class="op">+</span><span class="st">".png"</span>)</span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a></span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a>    <span class="va">close</span>()</span>
<span id="cb12-30"><a href="#cb12-30" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Break programs up into short, single-purpose functions with
meaningful names.”</li>
<li>“Define functions using the <code>function</code> keyword.”</li>
</ul>
</div>
</div>
</div></section><section id="aio-07-loops"><p>Content from <a href="07-loops.html">Repeating With Loops</a></p>
<hr>
<p>Last updated on 2023-08-21 |

        <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/edit/main/episodes/07-loops.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 50 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How can I repeat the same operations on multiple values?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Explain what a for loop does.”</li>
<li>“Correctly write for loops that repeat simple commands.”</li>
<li>“Trace changes to a loop variable as the loops runs.”</li>
<li>“Use a for loop to process multiple files”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Recall that we have to do this analysis for every one of our dozen
datasets, and we need a better way than typing out commands for each
one, because we’ll find ourselves writing a lot of duplicate code.
Remember, code that is repeated in two or more places will eventually be
wrong in at least one. Also, if we make changes in the way we analyze
our datasets, we have to introduce that change in every copy of our
code. To avoid all of this repetition, we have to teach MATLAB to repeat
our commands, and to do <em>that</em>, we have to learn how to write
<em>loops</em>.</p>
<p>Suppose we want to print each character in the word “lead” on a line
of its own. One way is to use four <code>disp</code> statements:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'lead'</span><span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">1</span>))</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">2</span>))</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">3</span>))</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">4</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">l</span></span>
<span><span class="va">e</span></span>
<span><span class="va">a</span></span>
<span><span class="va">d</span></span></code></pre>
</div>
<p>But this is a bad approach for two reasons:</p>
<ol style="list-style-type: decimal">
<li><p>It doesn’t scale: if we want to print the characters in a string
that’s hundreds of letters long, we’d be better off typing them
in.</p></li>
<li><p>It’s fragile: if we change <code>word</code> to a longer string,
it only prints part of the data, and if we change it to a shorter one,
it produces an error, because we’re asking for characters that don’t
exist.</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'tin'</span><span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">1</span>))</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">2</span>))</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">3</span>))</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">4</span>))</span></code></pre>
</div>
<pre><code>error: A(I): index out of bounds; value 4 out of bound 3</code></pre>
<p>{: .error}</p>
<p>There’s a better approach:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'lead'</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">l</span></span>
<span><span class="va">e</span></span>
<span><span class="va">a</span></span>
<span><span class="va">d</span></span></code></pre>
</div>
<p>This improved version uses a <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#for-loop">for loop</a>
to repeat an operation—in this case, printing to the screen—once for
each element in an array.</p>
<p>The general form of a for loop is:</p>
<pre><code>for variable = collection
    do things with variable
end</code></pre>
<p>{: .source}</p>
<p>The for loop executes the commands in the <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#loop-body">loop
body</a> for every value in the array <code>collection</code>. This
value is called the <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#loop-variable">loop
variable</a>, and we can call it whatever we like. In our example, we
gave it the name <code>letter</code>.</p>
<p>We have to terminate the loop body with the <code>end</code> keyword,
and we can have as many commands as we like in the loop body. But, we
have to remember that they will all be repeated as many times as there
are values in <code>collection</code>.</p>
<p>Our for loop has made our code more scalable, and less fragile.
There’s still one little thing about it that should bother us. For our
loop to deal appropriately with shorter or longer words, we have to
change the first line of our loop by hand:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'tin'</span><span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">t</span></span>
<span><span class="va">i</span></span>
<span><span class="va">n</span></span></code></pre>
</div>
<p>Although this works, it’s not the best way to write our loop:</p>
<ul>
<li><p>We might update <code>word</code> and forget to modify the loop
to reflect that change.</p></li>
<li><p>We might make a mistake while counting the number of letters in
<code>word</code>.</p></li>
</ul>
<p>Fortunately, MATLAB provides us with a convenient function to write a
better loop:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'aluminum'</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">word</span>)</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">a</span></span>
<span><span class="va">l</span></span>
<span><span class="va">u</span></span>
<span><span class="va">m</span></span>
<span><span class="va">i</span></span>
<span><span class="va">n</span></span>
<span><span class="va">u</span></span>
<span><span class="va">m</span></span></code></pre>
</div>
<p>This is much more robust code, as it can deal identically with words
of arbitrary length. Loops are not only for working with strings, they
allow us to do repetitive calculations regardless of data type. Here’s
another loop that calculates the sum of all even numbers between 1 and
10:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="va">total</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="kw">for</span> <span class="va">even_number</span> <span class="op">=</span> <span class="fl">2</span> <span class="op">:</span> <span class="fl">2</span> <span class="op">:</span> <span class="fl">10</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    <span class="va">total</span> <span class="op">=</span> <span class="va">total</span> <span class="op">+</span> <span class="va">even_number</span><span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'The sum of all even numbers between 1 and 10 is:'</span>)</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="va">disp</span>(<span class="va">total</span>)</span></code></pre>
</div>
<p>It’s worth tracing the execution of this little program step by
step.</p>
<div id="the-debugger" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-debugger" class="callout-inner">
<h3 class="callout-title">The debugger</h3>
<div class="callout-content">
<p>We can use the MATLAB debugger to trace the execution of a
program.</p>
<p>The first step is to set a <strong>break point</strong> by clicking
just to the right of a line number on the <code>-</code> symbol. A red
circle will appear — this is the break point, and when we run the
script, MATLAB will pause execution at that line.</p>
<p>A green arrow appears, pointing to the next line to be run. To
continue running the program one line at a time, we use the
<code>step</code> button.</p>
<p>We can then inspect variables in the workspace or by hovering the
cursor over where they appear in the code, or get MATLAB to evaluate
expressions in the command window (notice the prompt changes to
<code>K&gt;&gt;</code>).</p>
<p>This process is useful to check your understanding of a program, in
order to correct mistakes.</p>
<p>This process is illustrated below: <img src="../fig/debugger.gif" alt="debugger-demo" class="figure"></p>
</div>
</div>
</div>
<p>Since we want to sum only even numbers, the loop index
<code>even_number</code> starts at 2 and increases by 2 with every
iteration. When we enter the loop, <code>total</code> is zero - the
value assigned to it beforehand. The first time through, the loop body
adds the value of the first even number (2) to the old value of
<code>total</code> (0), and updates <code>total</code> to refer to that
new value. On the next loop iteration, <code>even_number</code> is 4 and
the initial value of <code>total</code> is 2, so the new value assigned
to <code>total</code> is 6. After <code>even_number</code> reaches the
final value (10), <code>total</code> is 30; since this is the end of the
range for <code>even_number</code> the loop finishes and the
<code>disp</code> statements give us the final answer.</p>
<p>Note that a loop variable is just a variable that’s being used to
record progress in a loop. It still exists after the loop is over, and
we can re-use variables previously defined as loop variables as
well:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">even_number</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">10</span></span></code></pre>
</div>
<div id="performing-exponentiation" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="performing-exponentiation" class="callout-inner">
<h3 class="callout-title">Performing Exponentiation</h3>
<div class="callout-content">
<p>MATLAB uses the caret (<code>^</code>) to perform exponentiation:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="fl">5</span><span class="op">^</span><span class="fl">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">125</span></span></code></pre>
</div>
<p>You can also use a loop to perform exponentiation. Remember that
<code>b^x</code> is just <code>b*b*b*</code>… <code>x</code> times.</p>
<p>Let a variable <code>b</code> be the base of the number and
<code>x</code> the exponent. Write a loop to compute <code>b^x</code>.
Check your result for <code>b = 4</code> and <code>x = 5</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co">% Loop to perform exponentiation</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="va">b</span> <span class="op">=</span> <span class="fl">4</span><span class="op">;</span>    <span class="co">% base</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="va">x</span> <span class="op">=</span> <span class="fl">5</span><span class="op">;</span>    <span class="co">% exponent</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="va">result</span><span class="op">=</span><span class="fl">1</span><span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">x</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    <span class="va">result</span> <span class="op">=</span> <span class="va">result</span> <span class="op">*</span> <span class="va">b</span><span class="op">;</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="va">disp</span>([<span class="va">num2str</span>(<span class="va">b</span>)<span class="op">,</span> <span class="ss">'^'</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">x</span>)<span class="op">,</span> <span class="ss">' = '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">result</span>)])</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="incrementing-with-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="incrementing-with-loops" class="callout-inner">
<h3 class="callout-title">Incrementing with Loops</h3>
<div class="callout-content">
<p>Write a loop that spells the word “aluminum,” adding one letter at a
time:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">a</span></span>
<span><span class="va">al</span></span>
<span><span class="va">alu</span></span>
<span><span class="va">alum</span></span>
<span><span class="va">alumi</span></span>
<span><span class="va">alumin</span></span>
<span><span class="va">aluminu</span></span>
<span><span class="va">aluminum</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">% spell a string adding one letter at a time using a loop</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'aluminium'</span><span class="op">;</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">word</span>)</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="fl">1</span><span class="op">:</span><span class="va">letter</span>))</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="looping-in-reverse" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="looping-in-reverse" class="callout-inner">
<h3 class="callout-title">Looping in Reverse</h3>
<div class="callout-content">
<p>In MATLAB, the colon operator (<code>:</code>) accepts a <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#stride">stride</a> or
skip argument between the start and stop:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="fl">11</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1 4 7 10</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="fl">11</span><span class="op">:-</span><span class="fl">3</span><span class="op">:</span><span class="fl">1</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>11 8 5 2</code></pre>
</div>
<p>Using this, write a loop to print the letters of “aluminum” in
reverse order, one letter per line.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">m</span></span>
<span><span class="va">u</span></span>
<span><span class="va">n</span></span>
<span><span class="va">i</span></span>
<span><span class="va">m</span></span>
<span><span class="va">u</span></span>
<span><span class="va">l</span></span>
<span><span class="va">a</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co">% Spell a string in reverse using a loop</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'aluminium'</span><span class="op">;</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="va">length</span>(<span class="va">word</span>)<span class="op">:-</span><span class="fl">1</span><span class="op">:</span><span class="fl">1</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="analyzing-patient-data-from-multiple-files">Analyzing patient data from multiple files<a class="anchor" aria-label="anchor" href="#analyzing-patient-data-from-multiple-files"></a>
</h2>
<hr class="half-width">
<p>We now have almost everything we need to process multiple data files
using a loop and the plotting code in our <code>plot_patient1</code>
script.</p>
<p>We still need to generate a list of data files to process, and then
we can use a loop to repeat the analysis for each file.</p>
<p>We can use the <code>dir</code> command to return a <strong>structure
array</strong> containing the names of the files in the
<code>data</code> directory. Each element in this <em>structure
array</em> is a <strong>structure</strong>, containing information about
a single file in the form of named <strong>fields</strong>.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>files =
  12×1 struct array with fields:
    name
    folder
    date
    bytes
    isdir
    datenum</code></pre>
</div>
<p>To access the <em>name</em> field of the first file, we can use the
following syntax:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">filename</span> <span class="op">=</span> <span class="va">files</span>(<span class="fl">1</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">filename</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>inflammation-01.csv</code></pre>
</div>
<p>To get the modification date of the third file, we can do:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mod_date</span> <span class="op">=</span> <span class="va">files</span>(<span class="fl">3</span>).<span class="va">date</span><span class="op">;</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">mod_date</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>26-Jul-2015 22:24:31</code></pre>
</div>
<p>A good first step towards processing multiple files is to write a
loop which prints the name of each of our files. Let’s write this in a
script <code>plot_all.m</code> which we will then develop further:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co">%PLOT_ALL	Developing code to automate inflammation analysis</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>	<span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a>	<span class="va">disp</span>(<span class="va">file_name</span>)</span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot_all</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>inflammation-01.csv
inflammation-02.csv
inflammation-03.csv
inflammation-04.csv
inflammation-05.csv
inflammation-06.csv
inflammation-07.csv
inflammation-08.csv
inflammation-09.csv
inflammation-10.csv
inflammation-11.csv
inflammation-12.csv</code></pre>
</div>
<p>Another task is to generate the file names for the figures we’re
going to save. Let’s name the output file after the data file used to
generate the figure. So for the data set
<code>inflammation-01.csv</code> we will call the figure
<code>inflammation-01.png</code>. We can use the <code>replace</code>
command for this purpose.</p>
<p>The syntax for the <code>replace</code> command is like this:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="va">NEWSTR</span> <span class="op">=</span> <span class="va">replace</span>(<span class="va">STR</span><span class="op">,</span> <span class="va">OLD</span><span class="op">,</span> <span class="va">NEW</span>)</span></code></pre>
</div>
<p>So for example if we have the string <code>big_shark</code> and want
to get the string <code>little_shark</code>, we can execute the
following command:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">new_string</span> <span class="op">=</span> <span class="va">replace</span>(<span class="ss">'big_shark'</span><span class="op">,</span> <span class="ss">'big'</span><span class="op">,</span> <span class="ss">'little'</span>)<span class="op">;</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">new_string</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">little_shark</span></span></code></pre>
</div>
<div id="gnu-octave" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="gnu-octave" class="callout-inner">
<h3 class="callout-title">GNU Octave</h3>
<div class="callout-content">
<p>In Octave, the <code>replace</code> function doesn’t exist, but the
<code>strrep</code> function is a direct replacement. The above example
becomes</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">new_string</span> <span class="op">=</span> <span class="va">strep</span>(<span class="ss">'big_shark'</span><span class="op">,</span> <span class="ss">'big'</span><span class="op">,</span> <span class="ss">'little'</span>)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="va">little_shark</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>Recall that we’re saving our figures to the <code>results</code>
directory. The best way to generate a path to a file in MATLAB is by
using the <code>fullfile</code> command. This generates a file path with
the correct separators for the platform you’re using (i.e. forward slash
for Linux and macOS, and backslash for Windows). This makes your code
more portable which is great for collaboration.</p>
<p>Putting these concepts together, we can now generate the paths for
the data files, and the image files we want to save:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="co">%PLOT_ALL	Developing code to automate inflammation analysis</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a>    <span class="co">% Generate string for image name</span></span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a>    <span class="va">img_name</span> <span class="op">=</span> <span class="va">replace</span>(<span class="va">file_name</span><span class="op">,</span> <span class="ss">'.csv'</span><span class="op">,</span> <span class="ss">'.png'</span>)<span class="op">;</span></span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a>    <span class="co">% Generate path to data file and image file</span></span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'data'</span><span class="op">,</span> <span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb39-13"><a href="#cb39-13" tabindex="-1"></a>    <span class="va">img_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'results'</span><span class="op">,</span><span class="va">img_name</span>)<span class="op">;</span></span>
<span id="cb39-14"><a href="#cb39-14" tabindex="-1"></a></span>
<span id="cb39-15"><a href="#cb39-15" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">file_name</span>)</span>
<span id="cb39-16"><a href="#cb39-16" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">img_name</span>)</span>
<span id="cb39-17"><a href="#cb39-17" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>data/inflammation-01.csv
results/inflammation-01.png
data/inflammation-02.csv
results/inflammation-02.png
data/inflammation-03.csv
results/inflammation-03.png
data/inflammation-04.csv
results/inflammation-04.png
data/inflammation-05.csv
results/inflammation-05.png
data/inflammation-06.csv
results/inflammation-06.png
data/inflammation-07.csv
results/inflammation-07.png
data/inflammation-08.csv
results/inflammation-08.png
data/inflammation-09.csv
results/inflammation-09.png
data/inflammation-10.csv
results/inflammation-10.png
data/inflammation-11.csv
results/inflammation-11.png
data/inflammation-12.csv
results/inflammation-12.png</code></pre>
</div>
<p>We’re now ready to modify <code>plot_all.m</code> to actually process
multiple data files:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="co">%PLOT_ALL   Print statistics for all patients.</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="co">%           Save plots of statistics to disk.</span></span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a><span class="co">% Process each file in turn</span></span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a>    <span class="co">% Generate strings for image names:</span></span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a>    <span class="va">img_name</span>  <span class="op">=</span> <span class="va">replace</span>(<span class="va">file_name</span><span class="op">,</span> <span class="ss">'.csv'</span><span class="op">,</span> <span class="ss">'.png'</span>)<span class="op">;</span></span>
<span id="cb41-12"><a href="#cb41-12" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" tabindex="-1"></a>    <span class="co">% Generate path to data file and image file</span></span>
<span id="cb41-14"><a href="#cb41-14" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'data'</span><span class="op">,</span> <span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb41-15"><a href="#cb41-15" tabindex="-1"></a>    <span class="va">img_name</span>  <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'results'</span><span class="op">,</span> <span class="va">img_name</span>)<span class="op">;</span></span>
<span id="cb41-16"><a href="#cb41-16" tabindex="-1"></a></span>
<span id="cb41-17"><a href="#cb41-17" tabindex="-1"></a>    <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb41-18"><a href="#cb41-18" tabindex="-1"></a></span>
<span id="cb41-19"><a href="#cb41-19" tabindex="-1"></a>    <span class="co">% Create figures</span></span>
<span id="cb41-20"><a href="#cb41-20" tabindex="-1"></a>    <span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span>
<span id="cb41-21"><a href="#cb41-21" tabindex="-1"></a></span>
<span id="cb41-22"><a href="#cb41-22" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb41-23"><a href="#cb41-23" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb41-24"><a href="#cb41-24" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Average'</span>)</span>
<span id="cb41-25"><a href="#cb41-25" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb41-26"><a href="#cb41-26" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb41-27"><a href="#cb41-27" tabindex="-1"></a></span>
<span id="cb41-28"><a href="#cb41-28" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb41-29"><a href="#cb41-29" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb41-30"><a href="#cb41-30" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb41-31"><a href="#cb41-31" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb41-32"><a href="#cb41-32" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb41-33"><a href="#cb41-33" tabindex="-1"></a></span>
<span id="cb41-34"><a href="#cb41-34" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">3</span>)</span>
<span id="cb41-35"><a href="#cb41-35" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb41-36"><a href="#cb41-36" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb41-37"><a href="#cb41-37" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb41-38"><a href="#cb41-38" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb41-39"><a href="#cb41-39" tabindex="-1"></a></span>
<span id="cb41-40"><a href="#cb41-40" tabindex="-1"></a>    <span class="va">print</span>(<span class="va">img_name</span><span class="op">,</span> <span class="ss">'-dpng'</span>)</span>
<span id="cb41-41"><a href="#cb41-41" tabindex="-1"></a>    <span class="va">close</span>()</span>
<span id="cb41-42"><a href="#cb41-42" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>We run the modified script using its name in the Command Window:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot_all</span></span></code></pre>
</div>
<p>The first three figures output to the <code>results</code> directory
are as shown below:</p>
<figure><img src="../fig/inflammation-01.png" style="width:500px; height:400px" alt="inflammation-01.png" class="figure mx-auto d-block"></figure><figure><img src="../fig/inflammation-02.png" style="width:500px; height:400px" alt="inflammation-02.png" class="figure mx-auto d-block"></figure><figure><img src="../fig/inflammation-03.png" style="width:500px; height:400px" alt="inflammation-03.png" class="figure mx-auto d-block"></figure><p>Sure enough, the maxima of these data sets show exactly the same ramp
as the first, and their minima show the same staircase structure.</p>
<p>We’ve now automated the analysis and have confirmed that all the data
files we have looked at show the same artifact. This is what we set out
to test, and now we can just call one script to do it. With minor
modifications, this script could be re-used to check all our future data
files.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Use <code>for</code> to create a loop that repeats one or more
operations.”</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-08-cond"><p>Content from <a href="08-cond.html">Making Choices</a></p>
<hr>
<p>Last updated on 2023-08-21 |

        <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/edit/main/episodes/08-cond.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 40 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How can programs do different things for different data values?”
objectives:</li>
<li>“Construct a conditional statement using if, elseif, and else”</li>
<li>“Test for equality within a conditional statement”</li>
<li>“Combine conditional tests using AND and OR”</li>
<li>“Build a nested loop”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>xxx</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Our previous lessons have shown us how to manipulate data and repeat
things. However, the programs we have written so far always do the same
things, regardless of what data they’re given. We want programs to make
choices based on the values they are manipulating.</p>
<p>The tool that MATLAB gives us for doing this is called a <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#conditional-statement">conditional
statement</a>, and it looks like this:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">37</span><span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">100</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'greater'</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'not greater'</span>)</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'done'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>not greater
done</code></pre>
</div>
<p>The second line of this code uses the keyword <code>if</code> to tell
MATLAB that we want to make a choice. If the test that follows is true,
the body of the <code>if</code> (i.e., the lines between <code>if</code>
and <code>else</code>) are executed. If the test is false, the body of
the <code>else</code> (i.e., the lines between <code>else</code> and
<code>end</code>) are executed instead. Only one or the other is ever
executed.</p>
<p>Conditional statements don’t have to have an <code>else</code> block.
If there isn’t one, MATLAB simply doesn’t do anything if the test is
false:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">53</span><span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'before conditional...'</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">100</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'53 is greater than 100'</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'...after conditional'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>before conditional...
...after conditional</code></pre>
</div>
<p>We can also chain several tests together using <code>elseif</code>.
This makes it simple to write a script that gives the sign of a
number:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co">%CONDITIONAL_DEMO   Demo script to illustrate use of conditionals</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">53</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is positive'</span>)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="kw">elseif</span> <span class="va">num</span> <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is zero'</span>)</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is negative'</span>)</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>One important thing to notice in the code above is that we use a
double equals sign <code>==</code> to test for equality rather than a
single equals sign. This is because the latter is used to mean
assignment. In our test, we want to check for the equality of
<code>num</code> and <code>0</code>, not <em>assign</em> 0 to
<code>num</code>. This convention was inherited from C, and it does take
a bit of getting used to…</p>
<p>During a conditional statement, if one of the conditions is true,
this marks the end of the test: no subsequent conditions will be tested
and execution jumps to the end of the conditional.</p>
<p>Let’s demonstrate this by adding another condition which is true.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">% Demo script to illustrate use of conditionals</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">53</span><span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is positive'</span>)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="kw">elseif</span> <span class="va">num</span> <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is zero'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="kw">elseif</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">50</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>    <span class="co">% This block will never be executed</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is greater than 50'</span>)</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is negative'</span>)</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>We can also combine tests, using <code>&amp;&amp;</code> (and) and
<code>||</code> (or). <code>&amp;&amp;</code> is true if both tests are
true:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">if</span> ((<span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span>) <span class="op">&amp;&amp;</span> (<span class="op">-</span><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span>))</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'both parts are true'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'one part is not true'</span>)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>one part is not true</code></pre>
</div>
<p><code>||</code> is true if either test is true:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">if</span> (<span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">0</span>) <span class="op">||</span> (<span class="fl">3</span> <span class="op">&lt;</span> <span class="fl">4</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'at least one part is true'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>at least one part is true</code></pre>
</div>
<p>In this case, “either” means “either or both”, not “either one or the
other but not both”.</p>
<div id="true-and-false-statements" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="true-and-false-statements" class="callout-inner">
<h3 class="callout-title">True and False Statements</h3>
<div class="callout-content">
<p>The conditions we have tested above evaluate to a logical value:
<code>true</code> or <code>false</code>. However these numerical
comparison tests aren’t the only values which are <code>true</code> or
<code>false</code> in MATLAB. For example, <code>1</code> is considered
<code>true</code> and <code>0</code> is considered <code>false</code>.
In fact, <em>any</em> value can be used in a conditional statement.</p>
<p>Run the code below in order to discover which values are considered
<code>true</code> and which are considered <code>false</code>.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">if</span> <span class="ss">''</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty string is true'</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty string is false'</span>)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="kw">if</span> <span class="ss">'foo'</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty string is true'</span>)</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty string is false'</span>)</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="kw">if</span> []</span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty array is true'</span>)</span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty array is false'</span>)</span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="kw">if</span> [<span class="fl">22.5</span><span class="op">,</span> <span class="fl">1.0</span>]</span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty array is true'</span>)</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty array is false'</span>)</span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a></span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a><span class="kw">if</span> [<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span>]</span>
<span id="cb11-26"><a href="#cb11-26" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'array of zeros is true'</span>)</span>
<span id="cb11-27"><a href="#cb11-27" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-28"><a href="#cb11-28" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'array of zeros is false'</span>)</span>
<span id="cb11-29"><a href="#cb11-29" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb11-30"><a href="#cb11-30" tabindex="-1"></a></span>
<span id="cb11-31"><a href="#cb11-31" tabindex="-1"></a><span class="kw">if</span> <span class="va">true</span></span>
<span id="cb11-32"><a href="#cb11-32" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'true is true'</span>)</span>
<span id="cb11-33"><a href="#cb11-33" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-34"><a href="#cb11-34" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'true is false'</span>)</span>
<span id="cb11-35"><a href="#cb11-35" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="close-enough" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="close-enough" class="callout-inner">
<h3 class="callout-title">Close Enough</h3>
<div class="callout-content">
<p>Write a script called <code>near</code> that performs a test on two
variables, and displays <code>1</code> when the first variable is within
10% of the other and <code>0</code> otherwise. Compare your
implementation with your partner’s: do you get the same answer for all
possible pairs of numbers?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co">%NEAR   Display 1 if variable a is within 10% of variable b</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">%       and display 0 otherwise</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="va">a</span> <span class="op">=</span> <span class="fl">1.1</span><span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="va">b</span> <span class="op">=</span> <span class="fl">1.2</span><span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="kw">if</span> <span class="va">a</span><span class="op">/</span><span class="va">b</span> <span class="op">&gt;=</span> <span class="fl">0.9</span> <span class="op">&amp;&amp;</span> <span class="va">a</span><span class="op">/</span><span class="va">b</span> <span class="op">&lt;=</span> <span class="fl">1.1</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>    <span class="va">disp</span>(<span class="fl">1</span>)</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>    <span class="va">disp</span>(<span class="fl">0</span>)</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Another thing to realize is that <code>if</code> statements can also
be combined with loops. For example, if we want to sum the positive
numbers in a list, we can write this:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="va">numbers</span> <span class="op">=</span> [<span class="op">-</span><span class="fl">5</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="op">-</span><span class="fl">1</span><span class="op">,</span> <span class="fl">9</span><span class="op">,</span> <span class="fl">6</span>]<span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="va">total</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="kw">for</span> <span class="va">n</span> <span class="op">=</span> <span class="va">numbers</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">n</span> <span class="op">&gt;=</span> <span class="fl">0</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>        <span class="va">total</span> <span class="op">=</span> <span class="va">total</span> <span class="op">+</span> <span class="va">n</span><span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="va">disp</span>([<span class="ss">'sum of positive values: '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">total</span>)])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sum of positive values: 20</code></pre>
</div>
<p>With a little extra effort, we can calculate the positive and
negative sums in a loop:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="va">pos_total</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="va">neg_total</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="kw">for</span> <span class="va">n</span> <span class="op">=</span> <span class="va">numbers</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">n</span> <span class="op">&gt;=</span> <span class="fl">0</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>        <span class="va">pos_total</span> <span class="op">=</span> <span class="va">pos_total</span> <span class="op">+</span> <span class="va">n</span><span class="op">;</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>    <span class="kw">else</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>        <span class="va">neg_total</span> <span class="op">=</span> <span class="va">neg_total</span> <span class="op">+</span> <span class="va">n</span><span class="op">;</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="va">disp</span>([<span class="ss">'sum of positive values: '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">pos_total</span>)])</span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="va">disp</span>([<span class="ss">'sum of negative values: '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">neg_total</span>)])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sum of positive values: 26
sum of negative values: -6</code></pre>
</div>
<p>We can even put one loop inside another:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">for</span> <span class="va">number</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="ss">'ab'</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>        <span class="va">disp</span>([<span class="va">num2str</span>(<span class="va">number</span>)<span class="op">,</span> <span class="va">letter</span>])</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1a
1b
2a
2b
3a
3b</code></pre>
</div>
<div id="nesting" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="nesting" class="callout-inner">
<h3 class="callout-title">Nesting</h3>
<div class="callout-content">
<p>Will changing the order of nesting in the above loop change the
output? Why? Write down the output you might expect from changing the
order of the loops, then rewrite the code to test your hypothesis.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="ss">'ab'</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">number</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>        <span class="va">disp</span>([<span class="va">num2str</span>(<span class="va">number</span>)<span class="op">,</span> <span class="va">letter</span>])</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Reordering the nested loops changes the output. In the new code, the
number loop happens within the letter loop, so while letter = a, number
takes the values 1, 2, and 3 in turn.</p>
</div>
</div>
</div>
</div>
<p>Currently, our script <code>plot_all.m</code> reads in data, analyzes
it, and saves plots of the results. If we would rather display the plots
interactively, we would have to remove (or <em>comment out</em>) the
following code:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="va">print</span>(<span class="va">img_name</span><span class="op">,</span><span class="ss">'-dpng'</span>)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="va">close</span>()</span></code></pre>
</div>
<p>And, we’d also have to change this line of code, from:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span></code></pre>
</div>
<p>to:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'on'</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="co">% or equivalently: figure()</span></span></code></pre>
</div>
<p>This is not a lot of code to change every time, but it’s still work
that’s easily avoided using conditionals. Here’s our script re-written
to use <em>conditionals</em> to switch between saving plots as images
and plotting them interactively:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co">%PLOT_ALL  Save plots of statistics to disk.</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="co">%          Use variable plot_switch to control interactive plotting</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="co">%          vs saving images to disk.</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co">%            plot_switch = 0: show plots interactively</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="co">%            plot_switch = 1: save plots to disk</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="va">plot_switch</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="co">% Process each file in turn</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a>    <span class="co">% Generate strings for image names:</span></span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a>    <span class="va">img_name</span> <span class="op">=</span> <span class="va">replace</span>(<span class="va">file_name</span><span class="op">,</span> <span class="ss">'.csv'</span><span class="op">,</span> <span class="ss">'.png'</span>)<span class="op">;</span></span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a>    <span class="co">% Generate path to data file and image file</span></span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'data'</span><span class="op">,</span> <span class="va">filename</span>)<span class="op">;</span></span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a>    <span class="va">img_name</span>  <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'results'</span><span class="op">,</span> <span class="va">img_name</span>)<span class="op">;</span></span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a></span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a>    <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a>    <span class="co">% Create figures</span></span>
<span id="cb23-25"><a href="#cb23-25" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">plot_switch</span> <span class="op">==</span> <span class="fl">1</span></span>
<span id="cb23-26"><a href="#cb23-26" tabindex="-1"></a>        <span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span>
<span id="cb23-27"><a href="#cb23-27" tabindex="-1"></a>    <span class="kw">else</span></span>
<span id="cb23-28"><a href="#cb23-28" tabindex="-1"></a>        <span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'on'</span>)</span>
<span id="cb23-29"><a href="#cb23-29" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb23-30"><a href="#cb23-30" tabindex="-1"></a></span>
<span id="cb23-31"><a href="#cb23-31" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb23-32"><a href="#cb23-32" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb23-33"><a href="#cb23-33" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Average'</span>)</span>
<span id="cb23-34"><a href="#cb23-34" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb23-35"><a href="#cb23-35" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb23-36"><a href="#cb23-36" tabindex="-1"></a></span>
<span id="cb23-37"><a href="#cb23-37" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb23-38"><a href="#cb23-38" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb23-39"><a href="#cb23-39" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb23-40"><a href="#cb23-40" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb23-41"><a href="#cb23-41" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb23-42"><a href="#cb23-42" tabindex="-1"></a></span>
<span id="cb23-43"><a href="#cb23-43" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">3</span>)</span>
<span id="cb23-44"><a href="#cb23-44" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb23-45"><a href="#cb23-45" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb23-46"><a href="#cb23-46" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb23-47"><a href="#cb23-47" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb23-48"><a href="#cb23-48" tabindex="-1"></a></span>
<span id="cb23-49"><a href="#cb23-49" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">plot_switch</span> <span class="op">==</span> <span class="fl">1</span></span>
<span id="cb23-50"><a href="#cb23-50" tabindex="-1"></a>        <span class="va">print</span>(<span class="va">img_name</span><span class="op">,</span> <span class="ss">'-dpng'</span>)</span>
<span id="cb23-51"><a href="#cb23-51" tabindex="-1"></a>        <span class="va">close</span>()</span>
<span id="cb23-52"><a href="#cb23-52" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb23-53"><a href="#cb23-53" tabindex="-1"></a></span>
<span id="cb23-54"><a href="#cb23-54" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Use <code>if</code> and <code>else</code> to make choices based on
values in your program.”</li>
</ul>
</div>
</div>
</div></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/UoMResearchIT/machine-learning-neural-python/" class="external-link">Source</a></p>
				<p><a href="https://github.com/UoMResearchIT/machine-learning-neural-python/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.7" class="external-link">sandpaper (0.16.7)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.4" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://uomresearchit.github.io/machine-learning-neural-python/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://uomresearchit.github.io/machine-learning-neural-python/instructor/aio.html",
  "identifier": "https://uomresearchit.github.io/machine-learning-neural-python/instructor/aio.html",
  "dateCreated": "2023-09-11",
  "dateModified": "2024-09-24",
  "datePublished": "2024-09-24"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

